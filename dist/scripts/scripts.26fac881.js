"use strict";angular.module("frontendmuApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMaterial","md.data.table","ur.file"]).config(["$routeProvider","$mdThemingProvider","$httpProvider","$resourceProvider","$interpolateProvider",function(a,b,c,d,e){e.startSymbol("[[").endSymbol("]]"),c.defaults.xsrfCookieName="csrftoken",c.defaults.xsrfHeaderName="X-CSRFToken",d.defaults.stripTrailingSlashes=!1,b.theme("default").primaryPalette("green").accentPalette("light-green",{"default":"500"}),a.when("/",{templateUrl:"/views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"/views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/login",{templateUrl:"/views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/logout",{templateUrl:"/views/logout.html",controller:"LogoutCtrl",controllerAs:"logout"}).when("/inventario",{templateUrl:"/views/inventario.html",controller:"InventarioCtrl",controllerAs:"inventario"}).when("/establecimiento",{templateUrl:"/views/establecimiento.html",controller:"EstablecimientoCtrl",controllerAs:"establecimiento"}).when("/potrero",{templateUrl:"/views/potrero.html",controller:"PotreroCtrl",controllerAs:"potrero"}).when("/nutricion",{templateUrl:"/views/nutricion.html",controller:"NutricionCtrl",controllerAs:"nutricion"}).when("/sanitacion",{templateUrl:"/views/sanitacion.html",controller:"SanitacionCtrl",controllerAs:"sanitacion"}).when("/dashboard",{templateUrl:"/views/dashboard.html",controller:"DashboardCtrl",controllerAs:"dashboard"}).when("/compra",{templateUrl:"views/compra.html",controller:"CompraCtrl",controllerAs:"compra"}).otherwise({redirectTo:"/"})}]),angular.module("frontendmuApp").controller("MainCtrl",["$scope","ServerData","Establecimiento","$location",function(a,b,c,d){a.establecimientos=[],a.obj=b,a.establecimientos=c.get(function(b){a.establecimientos=b.results}),a.seleccionar=function(b){a.obj.establecimiento=b,d.path("/inventario/")}}]),angular.module("frontendmuApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("frontendmuApp").controller("LoginCtrl",["$scope","$location","DjangoAuth","Validate",function(a,b,c,d){c.authenticated&&b.path("/"),a.model={username:"",password:""},a.complete=!1,a.login=function(e){a.errors=[],d.form_validation(e,a.errors),e.$invalid||c.login(a.model.username,a.model.password).then(function(){b.path("/")},function(b){a.errors=b})}}]),angular.module("frontendmuApp").service("Validate",function(){return{message:{minlength:"This value is not long enough.",maxlength:"This value is too long.",email:"A properly formatted email address is required.",required:"This field is required."},more_messages:{demo:{required:"Here is a sample alternative required message."}},check_more_messages:function(a,b){return(this.more_messages[a]||[])[b]||null},validation_messages:function(a,b,c){var d=[];for(var e in b[a].$error)if(b[a].$error[e]){var f=this.check_more_messages(a,e);f?d.push(f):this.message[e]?d.push(this.message[e]):d.push("Error: "+e)}var g=[];angular.forEach(d,function(a){-1===g.indexOf(a)&&g.push(a)}),c&&(c[a]=g)},form_validation:function(a,b){for(var c in a)"$"!==c.substr(0,1)&&this.validation_messages(c,a,b)}}}),angular.module("frontendmuApp").controller("LogoutCtrl",function(){}),angular.module("frontendmuApp").controller("MasterCtrl",["$scope","$location","ServerData","Establecimiento",function(a,b,c,d){a.establecimientos=[],a.obj=c,d.get(function(b){a.establecimientos=b.results}),a.seleccionar=function(c){a.obj.establecimiento=c,b.path("/inventario/")}}]),angular.module("frontendmuApp").service("ServerData",["Establecimiento",function(a){return{establecimiento:""}}]),angular.module("frontendmuApp").factory("Establecimiento",["$resource",function(a){return a("http://localhost:8000/api/establecimiento/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("InventarioCtrl",["$scope","$filter","$mdDialog","$mdMedia","$controller","Animal","Lote","ServerData","Categoria","Raza",function(a,b,c,d,e,f,g,h,i,j){function k(b){a.animales=b}function l(b){a.lotes=b}var m=h;a.estados_sanitarios=[{c:"E",display:"En fecha"},{c:"N",display:"No esta en fecha"},{c:"D",display:"En fecha"}],a.categorias=i.get(function(b){a.categorias=b}),a.razas=j.get(function(b){a.razas=b}),a.options={boundaryLinks:!1,pageSelect:!0},a.queryAnimales={establecimiento:h.establecimiento.id,estado:"V",ordering:"lote__nombre",page:1},a.selectedAnimales=[],a.getAnimales=function(){a.promiseAnimales=f.get(a.queryAnimales,k).$promise,a.selectedAnimales=[]},a.getAnimales(),a.editAnimal=function(d){c.show({templateUrl:"views/dialogs/dialogo_animal.html",targetEvent:null,controller:e("DialogsDialogoAnimalCtrl",{$scope:a,animalSeleccionado:d,obj:m})}).then(function(c){if(c!==!0){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id?angular.extend(d,c):a.animales.results.unshift(c)}a.getLotes()},function(){a.alert="You cancelled the dialog."})},a.deleteAnimal=function(d){var e=c.confirm().title("Estas seguro de que quieres eliminar?").textContent(d.categoria_nombre+"- Caravana: "+d.caravana+" - Raza: "+d.raza_nombre+" - Carimbo: "+d.carimbo).ariaLabel("Eliminar Animal").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(e).then(function(){f["delete"]({id:d.id},d,function(c){a.getLotes();var e=b("filter")(a.animales.results,function(a){return a.id.toString()===d.id.toString()})[0];a.animales.results.shift(e)})},function(){console.log("Cancelaste")})},a.deleteListaAnimal=function(b){c.show({templateUrl:"views/dialogs/dialogo_eliminar_animal.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","$filter",function(a,c,d,e){a.lista=b,a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(a){"guardar"===a?(b.length>=1&&angular.forEach(b,function(a){d["delete"]({id:a.id},a,function(a){console.log("eliminado: "+a.caravana)})}),c.hide(b)):c.hide(b)}}]}).then(function(b){b!==!0&&(a.getAnimales(),a.getLotes())},function(){a.alert="You cancelled the dialog."})},a.mudarAnimales=function(d){c.show({templateUrl:"views/dialogs/dialogo_mudar_animal.html",targetEvent:null,controller:["$scope","$mdDialog","Lote","Animal","$filter",function(a,b,c,e,f){a.lotes=[],a.lotes=c.get({establecimiento:m.establecimiento.id},function(b){a.lotes=b.results}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d.length>=1&&(angular.forEach(d,function(b){b.lote=a.form.lote,e.update({id:b.id},b,function(a){console.log(a)});var c=f("filter")(a.lotes,function(b){return b.id.toString()===a.form.lote.toString()})[0];b.lote_nombre=c.nombre}),b.hide(d))}}]}).then(function(c){c!==!0&&(a.getLotes(),angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)}))},function(){a.alert="You cancelled the dialog."})},a.recategorizar=function(d){c.show({templateUrl:"views/dialogs/dialogo_recategorizar_animal.html",targetEvent:null,controller:["$scope","$mdDialog","Categoria","Animal","$filter",function(a,b,c,e,f){a.categorias=[],a.categorias=c.get(function(b){a.categorias=b.results}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d.length>=1&&(angular.forEach(d,function(b){b.categoria=a.form.categoria,e.update({id:b.id},b,function(a){console.log(a)});var c=a.form.categoria,d=f("filter")(a.categorias,function(a){return a.id.toString()===c.toString()})[0];b.categoria_nombre=d.nombre}),b.hide(d))}}]}).then(function(c){c!==!0&&angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)})},function(){a.alert="You cancelled the dialog."})},a.agruparEnLote=function(d){c.show({templateUrl:"views/dialogs/dialogo_lote.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData",function(a,b,c,e){a.potreros=[],a.potreros=c.get({establecimiento:e.establecimiento.id,lote:""},function(b){a.potreros=b.results}),a.newLote={},a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=e.establecimiento.id,a.newLote.animales=[],a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c){var e=new g(a.newLote);e.$save(function(a){d.length>=1&&(angular.forEach(d,function(a){a.lote=e.id,f.update({id:a.id},a,function(a){console.log(a)}),a.lote_nombre=e.nombre}),b.hide(d))},function(a){console.log(a)}),b.hide(d)}}}]}).then(function(c){c!==!0&&(a.getLotes(),angular.forEach(c,function(c){var d=b("filter")(a.animales.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id&&angular.extend(d,c)}))},function(){a.alert="You cancelled the dialog."})},a.mortandad=function(b){c.show({templateUrl:"views/dialogs/dialogo_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Mortandad","ServerData",function(a,c,d,e,f){a.form={},a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(g){if("guardar"===g&&b.length>=1){var h=[];angular.forEach(b,function(a){h.push(a.id),a.estado="M",a.lote=null,d.update({id:a.id},a,function(a){})});var i=new e(a.form);i.establecimiento=f.establecimiento.id,i.animales=[],i.$save(function(a){a.animales=h,e.update({id:a.id},a,function(a){console.log(a)})},function(a){console.log(a)}),c.hide(b)}}}]}).then(function(b){b!==!0&&a.getAnimales()},function(){a.alert="You cancelled the dialog."})},a.queryLotes={establecimiento:h.establecimiento.id,ordering:"nombre",page:1},a.selectedLotes=[],a.getLotes=function(){a.promiseLotes=g.get(a.queryLotes,l).$promise,a.selectedLotes=[]},a.getLotes(),a.deleteLote=function(b){var d=c.confirm().title("Estas seguro de que quieres eliminar?").content("Lote: "+b.nombre+" - Potrero: "+b.potrero_nombre+" - Cantidad de animales: "+b.animales.length).ariaLabel("Lucky day").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(d).then(function(){g["delete"]({id:b.id},b,function(a){console.log(a)}),a.lotes.results.splice(a.lotes.results.indexOf(b),1),a.selectedLotes=[]},function(){a.status="Se eliminó correctamente."})},a.editLote=function(d){c.show({templateUrl:"views/dialogs/dialogo_lote.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData",function(a,b,c,e){a.potreros=[],a.potreros=c.get({establecimiento:e.establecimiento.id,lote:""},function(b){a.potreros=b.results}),a.newLote={},d?a.newLote=d:(a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=m.establecimiento.id,a.newLote.animales=[]),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c)if(d)g.update({id:a.newLote.id},a.newLote,function(c){a.newLote=c,b.hide(a.newLote)});else{var e=new g(a.newLote);e.$save(function(){},function(a){console.log(a)}),b.hide(e)}}}]}).then(function(c){if(c!==!0){var d=b("filter")(a.lotes.results,function(a){return a.id.toString()===c.id.toString()})[0];d&&d.id===c.id?angular.extend(d,c):a.lotes.results.unshift(c)}},function(){a.alert="You cancelled the dialog."})};var n=XLSX;a.archivo={},a.cargarArchivo=function(b){c.show({templateUrl:"views/dialogs/dialogo_archivo.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","ServerData",function(a,c,d,e){a.options={pageSelect:!0},a.logPagination=function(a,b){console.log("page: ",a),console.log("limit: ",b)},a.query={limit:20,page:1},a.archivo=b;var f={1:"Toro",2:"Vaca",3:"Desmamante",4:"Ternero"},g={1:"Brahman",2:"Angus",3:"Brangus",4:"Nelore"},h=function(a,b,c){return b==c?a:(a.hasOwnProperty(b)&&(a[c]=a[b],delete a[b]),a)};angular.forEach(a.archivo,function(a){a=h(a,"Caravana","caravana"),a=h(a,"Carimbo","carimbo"),a=h(a,"Categoria","categoria"),a=h(a,"Raza","raza"),a=h(a,"Peso especifico","peso_especifico"),a=h(a,"Estado sanitario","estado_sanitario"),a.estado="V",a.establecimiento=e.establecimiento.id,"En fecha"===a.estado_sanitario.toString()?(a.estado_sanitario="E",a.estado_sanitario_display="En fecha"):"No esta en fecha"===a.estado_sanitario.toString()?(a.estado_sanitario="N",a.estado_sanitario_display="No esta en fecha"):"Desconocido"===a.estado_sanitario.toString()?(a.estado_sanitario="D",a.estado_sanitario_display="Desconocido"):(a.estado_sanitario="E",a.estado_sanitario_display="En fecha"),a.raza_nombre=g[a.raza],a.categoria_nombre=f[a.categoria]}),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(b){"guardar"===b&&(angular.forEach(a.archivo,function(a){var b=new d(a);console.log(b),b.$save(function(){},function(a){console.log(a)})}),c.hide())}}]}).then(function(){a.getAnimales()},function(){a.alert="You cancelled the dialog."})};var o=function(b){var c={},d=n.utils.sheet_to_row_object_array(b.Sheets[b.SheetNames[0]]);d.length>0&&(c=d),a.cargarArchivo(c),a.model={}};a.handleFile=function(a){console.log(a);var b,c,d=[a.file];for(b=0,c=d[b];b!=d.length;++b){var e=new FileReader;c.name;e.onload=function(a){var b=a.target.result,c=n.read(b,{type:"binary"});console.log("ok"),o(c)},e.readAsBinaryString(c)}}}]),angular.module("frontendmuApp").factory("Animal",["$resource",function(a){return a("http://localhost:8000/animal/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Lote",["$resource",function(a){return a("http://localhost:8000/api/lote/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Potrero",["$resource",function(a){return a("http://localhost:8000/api/potrero/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Categoria",["$resource",function(a){return a("http://localhost:8000/api/categoria/:id/",null)}]),angular.module("frontendmuApp").factory("Raza",["$resource",function(a){return a("http://localhost:8000/api/raza/:id/",null)}]),angular.module("frontendmuApp").factory("Mortandad",["$resource",function(a){return a("http://localhost:8000/api/mortandad/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("EstablecimientoCtrl",["$scope","$location",function(a,b){a.go=function(a){b.path(a)}}]),angular.module("frontendmuApp").controller("PotreroCtrl",["$scope","Potrero","$mdDialog","$filter","ServerData",function(a,b,c,d,e){function f(b){a.potreros=b}a.queryPotreros={establecimiento:e.establecimiento.id,ordering:"nombre",page:1},a.selectedPotreros=[],a.getPotreros=function(){a.promisePotreros=b.get(a.queryPotreros,f).$promise,a.selectedPotreros=[]},a.getPotreros(),a.deletePotrero=function(d){console.log(d);var e=c.confirm().title("Estas seguro de que quieres eliminar?").content("Nombre: "+d.nombre+" - Superficie: "+d.superficie+" - Uso: "+d.uso).ariaLabel("Delete potrero").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(e).then(function(){b["delete"]({id:d.id},d,function(b){console.log(b),a.potreros.results.splice(a.potreros.results.indexOf(d),1)})},function(){a.status="Se eliminó correctamente."})},a.editPotrero=function(b){c.show({templateUrl:"/staticfiles/views/dialogs/dialogo_potrero.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData",function(a,c,d,e){a.newPotrero={},b?a.newPotrero=b:(a.newPotrero.nombre="",a.newPotrero.superficie="",a.newPotrero.uso="",a.newPotrero.establecimiento=e.establecimiento.id),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(e){if("guardar"===e)if(b)d.update({id:a.newPotrero.id},a.newPotrero,function(b){a.newPotrero=b,c.hide(a.newPotrero)});else{var f=new d(a.newPotrero);f.$save(function(){},function(a){console.log(a)}),c.hide(f)}}}]}).then(function(b){if(b!==!0){var c=d("filter")(a.potreros.results,function(a){return a.id.toString()===b.id.toString()})[0];c&&c.id===b.id?angular.extend(c,b):a.potreros.results.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("NutricionCtrl",["$scope","$mdDialog","Nutricion","$filter","ServerData","Lote",function(a,b,c,d,e,f){function g(b){a.lotes=b}function h(b){a.dietas=b}a.queryLotes={establecimiento:e.establecimiento.id,ordering:"nombre",page:1},a.getLotes=function(){a.promiseLotes=f.get(a.queryLotes,g).$promise},a.getLotes(),a.queryDietas={establecimiento:e.establecimiento.id,ordering:"fecha_inicio",page:1},a.selectedDietas=[],a.getDietas=function(){a.queryDietas.lotes&&"todos"===a.queryDietas.lotes.toString()&&delete a.queryDietas.lotes,a.promiseDietas=c.get(a.queryDietas,h).$promise,a.selectedDietas=[]},a.getDietas(),a.deleteDieta=function(e){console.log(e);var f=b.confirm().title("Estas seguro de que quieres eliminar?").content("Tipo: "+e.tipo_nutricion+"<br>Tipo de alimento: "+e.tipo_comida+"<br>Periodo: "+d("date")(new Date(e.fecha_inicio),"dd/MM/yyyy")+" - "+d("date")(new Date(e.fecha_fin),"dd/MM/yyyy")+"<br>").ariaLabel("Delete potrero").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");b.show(f).then(function(){c["delete"]({id:e.id},e,function(b){console.log(b),a.dietas.results.splice(a.dietas.results.indexOf(e),1),a.selectedDietas=[]})},function(){a.status="Se eliminó correctamente."})},a.editDieta=function(c){b.show({templateUrl:"views/dialogs/dialogo_nutricion.html",targetEvent:c,controller:["$scope","$mdDialog","Nutricion","Lote","ServerData",function(a,b,d,e,f){function g(a,b){var c=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),d=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((d-c)/h)}var h=864e5;a.form={},a.calculo_kilos=function(b){var c=g(a.newNutricion.fecha_inicio,a.newNutricion.fecha_fin);console.log(c),b==a.form.gramos?a.form.kilos=b*c/1e3:a.form.gramos=b/c*1e3},a.lotes=[],e.get({establecimiento:f.establecimiento.id},function(b){a.lotes=b.results}),a.alimentos=["Sal mineral","Balanceado","Pastura","Núcleo","Otros"],a.newNutricion={},c&&(a.newNutricion=c,a.newNutricion.fecha_inicio=new Date(c.fecha_inicio),a.newNutricion.fecha_fin=new Date(c.fecha_fin),console.log(a.alimentos.indexOf(a.newNutricion.tipo_comida)),-1==a.alimentos.indexOf(a.newNutricion.tipo_comida)&&(a.form.tipo_comida=a.newNutricion.tipo_comida,a.newNutricion.tipo_comida="Otros"),a.form.kilos=a.newNutricion.kilos,a.calculo_kilos(a.newNutricion.kilos)),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(e){if("guardar"===e)if(c)"Otros"==a.newNutricion.tipo_comida&&(a.newNutricion.tipo_comida=a.form.tipo_comida),a.newNutricion.kilos=a.form.kilos,d.update({id:a.newNutricion.id},a.newNutricion,function(c){a.newNutricion=c,b.hide(a.newNutricion)});else{var g=new d(a.newNutricion);"Otros"==g.tipo_comida&&(g.tipo_comida=a.form.tipo_comida),g.kilos=a.form.kilos,console.log(g),g.establecimiento=f.establecimiento.id,g.$save(function(){},function(a){console.log(a)}),b.hide(g)}}}]}).then(function(b){if(b!==!0){var c=d("filter")(a.dietas,{id:b.id},!0)[0];c&&c.id===b.id?angular.extend(c,b):a.dietas.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").factory("Nutricion",["$resource",function(a){return a("http://localhost:8000/api/nutricion/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("SanitacionCtrl",["$scope","Evento","EventoEstablecimiento","$mdDialog","$filter","ServerData",function(a,b,c,d,e,f){b.query(function(b){a.eventos=b,angular.element("#calendar").fullCalendar("addEventSource",a.eventos)}),c.query({establecimiento:f.establecimiento.id},function(b){a.eventos_establecimiento=b,console.log(a.eventos_establecimiento),angular.element("#calendar").fullCalendar("addEventSource",a.eventos_establecimiento)}),a.showAlert=function(a){d.show(d.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Sanitación").textContent(a.title).ariaLabel("Alert Dialog").ok("OK!").targetEvent(null))},angular.element("#calendar").fullCalendar({eventClick:function(b,c,d){if(b.veterinario){var f=e("filter")(a.eventos_establecimiento,{id:b.id},!0)[0];a.agregarEvento(f)}},dayClick:function(b,c,d){var e={start:b,end:b,veterinario:"",establecimiento:f.establecimiento.id,nombre:""};a.agregarEvento(e)}}),a.agregarEvento=function(b){d.show({templateUrl:"/staticfiles/views/dialogs/dialogo_evento.html",targetEvent:null,controller:["$scope","$mdDialog","EventoEstablecimiento","$filter","ServerData",function(a,c,d,e,f){a.newEvento={},b&&(b.id?(a.newEvento=b,a.newEvento.start=new Date(b.start),a.newEvento.end=new Date(b.end)):(a.newEvento=b,a.newEvento.start=new Date(b.start),a.newEvento.end=new Date(b.end))),a.deleteEvento=function(a){var b=c.confirm().title("Estas seguro de que quieres eliminar?").textContent(a.title).ariaLabel("Eliminar Vacunación").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(b).then(function(){d["delete"]({id:a.id},a,function(b){angular.element("#calendar").fullCalendar("removeEvents",[a.id])})},function(){console.log("Cancelaste")})},a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(e){if("guardar"===e)if(b.id)console.log(a.newEvento),d.update({id:a.newEvento.id},a.newEvento,function(b){a.newEvento=b,c.hide(a.newEvento)});else{a.newEvento.establecimiento=f.establecimiento.id;var g=new d(a.newEvento);g.$save(function(a){angular.element("#calendar").fullCalendar("addEventSource",[a])},function(a){console.log(a)}),c.hide(g)}}}]}).then(function(b){if(b&&b!==!0){var c=e("filter")(a.eventos_establecimiento,{id:b.id},!0)[0];c&&c.id===b.id?(angular.extend(c,b),angular.element("#calendar").fullCalendar("removeEvents",[b.id]),angular.element("#calendar").fullCalendar("addEventSource",[b])):a.eventos_establecimiento.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").factory("Evento",["$resource",function(a){return a("http://localhost:8000/api/sanitacion/eventos/:id/",null)}]),angular.module("frontendmuApp").factory("EventoEstablecimiento",["$resource",function(a){return a("http://localhost:8000/api/sanitacion/eventos_establecimiento/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("DashboardCtrl",["$scope","Evento","EventoEstablecimiento",function(a,b,c){b.query(function(b){a.eventos=b,angular.element("#calendar").fullCalendar("addEventSource",a.eventos)}),c.query({establecimiento:ServerData.establecimiento.id},function(b){a.eventos_establecimiento=b,console.log(a.eventos_establecimiento),angular.element("#calendar").fullCalendar("addEventSource",a.eventos_establecimiento)}),angular.element("#calendar").fullCalendar({})}]),angular.module("frontendmuApp").controller("CompraCtrl",["$scope","$filter","$mdDialog","Animal","Compra",function(a,b,c,d,e){a.compras=[],a.seleccionCompra=[],a.comprasCargadas=!1,a.updateListadoCompras=function(){a.promise=e.query({establecimiento:1},function(b){a.compras=b,a.compras!==[]&&(a.comprasCargadas=!0)})},a.updateListadoCompras(),a.query={order:"fecha",limit:5,page:1},a.verDetalleCompra=function(a){console.log(a)},a.abrirFormCarga=function(){c.show({templateUrl:"views/dialogs/dialogo_crear_compra.html",targetEvent:null,controller:"DialogsDialogoCrearCompraCtrl"}).then(function(){a.updateListadoCompras()})}}]),angular.module("frontendmuApp").factory("Compra",["$resource",function(a){return a("http://127.0.0.1:8000/compra/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]).factory("DetalleCompra",["$resource",function(a){return a("http://127.0.0.1:8000/detalle_compra/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("DialogsDialogoCrearCompraCtrl",["$scope","$mdDialog","Animal","Categoria","Raza","ServerData","Compra",function(a,b,c,d,e,f,g){a.newCompra={},a.newDetalle={},a.newCompra.detalle_compra=[],console.log(a.newCompra.detalle_compra.length),a.seleccionDetalleCompra=[],a.categorias=d.query(function(b){a.catergorias=b}),a.razas=e.query(function(b){a.razas=b}),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.cargarDetalleCompra=function(b){var c={};c.categoria=b.categoria,c.carimbo=b.carimbo,c.raza=b.raza,c.cantidad=b.cantidad,c.caravana_inicial=b.nro_caravana_inicial,a.newCompra.detalle_compra.push(c),a.DetalleCompra={}},a.guardarCompra=function(b){a.newCompra.establecimiento=1;var c=new g(a.newCompra);c.$save(function(){console.log("Compra realizada")},function(a){console.log(a)}),a.hide()}}]),angular.module("frontendmuApp").controller("DialogsDialogoAnimalCtrl",["$scope","$mdDialog","Animal","Categoria","Raza","Lote","animalSeleccionado","obj",function(a,b,c,d,e,f,g,h){a.categorias=[],a.razas=[],a.lotes=[],a.lotes=f.get({establecimiento:h.establecimiento.id},function(b){a.lotes=b.results}),a.categorias=d.get(function(b){a.categorias=b.results}),a.razas=e.get(function(b){a.razas=b.results}),a.newAnimal={},g&&(a.newAnimal=g),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(d){if("guardar"===d)if(g)c.update({id:a.newAnimal.id},a.newAnimal,function(c){a.newAnimal=c,b.hide(a.newAnimal)});else{a.newAnimal.estado="V",a.newAnimal.establecimiento=h.establecimiento.id;var e=new c(a.newAnimal);e.$save(function(){},function(a){console.log(a)}),b.hide(e)}}}]),angular.module("frontendmuApp").run(["$templateCache",function(a){a.put("views/about.html","<p>Bellbird</p>"),a.put("views/compra.html",'<!--Section Compras --> <section> <md-card> <!-- Toolbar principal--> <md-toolbar class="green"> <div class="md-toolbar-tools white-text"> <div class="md-title">Compra</div> </div> </md-toolbar> <md-content> <!--Aca va ir el listado--> <md-card> <!-- Toolbar del listado--> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Listado de compras</span> <span flex></span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" ng-click="$mdOpenMenu($event)"> <md-icon>more_vert</md-icon> </md-button> <md-menu-content> <md-menu-item> <md-button ng-click="abrirFormCarga()"> <p>Agregar compra</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <!-- Toolbar de seleccion --> <md-toolbar class="md-table-toolbar alternate" ng-show="false"> </md-toolbar> <!-- Toolbar del buscador --> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <md-input-container flex> <label>Búsqueda</label> <input ng-model="buscarCompra"> </md-input-container> </div> </md-toolbar> <!-- Seccion de la tabla --> <md-table-container> <table md-table md-row-select multiple ng-model="seleccionCompra" md-progress="promise"> <thead md-head md-order="query.order" md-on-reorder="updateListadoCompras"> <tr md-row> <th md-column>Codigo de establecimiento vendedor</th> <th md-column>Nombre de establecimiento vendedor</th> <th md-column>Fecha</th> </tr> </thead> <tbody md-body> <tr md-row md-select="compra" md-select-id="id" md-auto-select ng-repeat="compra in compras"> <td md-cell>{{compra.cod_establecimiento_vendedor}}</td> <td md-cell>{{compra.nombre_vendedor}}</td> <td md-cell>{{compra.fecha}}</td> </tr> <tr> <td md-cell colspan="4" ng-hide="comprasCargadas"><p style="text-align: center" flex>No hay compras cargadas</p></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-limit-options="[5, 10, 15]" md-page="query.page" md-total="{{compras.count}}" md-on-paginate="updateListadoCompras" md-page-select></md-table-pagination> </md-card> </md-content> </md-card> </section>'),a.put("views/dashboard.html",'<h1 class="md-display-1 green-text">Dashboard</h1> <section> <md-card> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Calendario General</h2> </div> </md-toolbar> <md-content> <br> <div id="calendar" style="cursor:pointer"></div> </md-content> </md-card> </section>'),a.put("views/dialogs/dialogo_animal.html",'<md-dialog layout="column" aria-label="Cliente" style="min-width: 800px; min-height: 600px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Animal</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <md-content layout-padding> <form ng-show="razas.length >= 1 && categorias.length >= 1"> <md-input-container class="md-accent-1 md-block"> <label>Caravana</label> <input ng-model="newAnimal.caravana"> </md-input-container> <md-input-container class="md-block"> <label>Categoria</label> <md-select ng-model="newAnimal.categoria"> <md-option ng-repeat="cat in categorias" value="[[cat.id]]"> [[cat.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label>Carimbo</label> <input ng-model="newAnimal.carimbo" type="number"> </md-input-container> <md-input-container class="md-block"> <label>Raza</label> <md-select ng-model="newAnimal.raza"> <md-option ng-repeat="raza in razas" value="[[raza.id]]"> [[raza.nombre]] </md-option> </md-select></md-input-container> <md-input-container class="md-block"> <label>Estado Sanitario</label> <md-select ng-model="newAnimal.estado_sanitario"> <md-option value="E"> En fecha </md-option> <md-option value="N"> No esta en fecha </md-option> <md-option value="D"> Desconocido </md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label>Lote</label> <md-select ng-model="newAnimal.lote" aria-label="Lote"> <md-option value=""> No asignar </md-option> <md-option ng-repeat="lote in lotes" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label>Peso</label> <input ng-model="newAnimal.peso_especifico" type="number"> </md-input-container> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="razas.length >= 1 && categorias.length >= 1" layout-align="space-around"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-content> </md-dialog>'),a.put("views/dialogs/dialogo_archivo.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Archivo</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <div layout="column" layout-padding> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Animales</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column><span>Caravana</span></th> <th md-column><span>Categoria</span></th> <th md-column>Carimbo</th> <th md-column>Raza</th> <th md-column>Peso Específico (Kg.)</th> <th md-column>Estado Sanitario</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="animal in archivo | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell md-numeric>[[animal.caravana]]</td> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell md-numeric>[[animal.carimbo]]</td> <td md-cell>[[animal.raza_nombre]]</td> <td md-cell md-numeric>[[animal.peso_especifico]]</td> <td md-cell>[[animal.estado_sanitario_display]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[archivo.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </div> </md-dialog>'),
a.put("views/dialogs/dialogo_crear_compra.html",'<md-dialog layout="column" aria-label="Compra" style="min-width: 100%; min-height: 100%"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Compra Animal</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"> <md-icon class="md-icon-button white-text"><i class="material-icons">close</i></md-icon> </md-button> </div> </md-toolbar> <!-- Card Encabezado --> <md-card> <md-content layout-padding> <h4 class="green-text">Encabezado</h4> <div layout="row"> <md-input-container class="md-accent-1 md-block" flex> <label>Codigo de establecimiento del vendedor</label> <input ng-model="newCompra.cod_establecimiento_vendedor"> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Nombre del vendedor</label> <input ng-model="newCompra.nombre_vendedor"> </md-input-container> <md-datepicker ng-model="newCompra.fecha" style="margin:13px 0" md-placeholder="Fecha de compra"></md-datepicker> </div> </md-content> </md-card> <md-card> <!-- Este es el formulario de carga de detalles --> <md-content layout-padding> <h4 class="green-text">Detalles</h4> <div layout="row"> <md-input-container class="md-accent-1 md-block" flex> <label>Categoria</label> <md-select ng-model="newDetalle.categoria"> <md-option ng-repeat="categoria in categorias" value="{{categoria.id}}"> {{categoria.nombre}} </md-option> </md-select> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Carimbo</label> <md-select ng-model="newDetalle.carimbo"> <md-option value="0">0</md-option> <md-option value="1">1</md-option> <md-option value="2">2</md-option> <md-option value="3">3</md-option> <md-option value="4">4</md-option> <md-option value="5">5</md-option> <md-option value="6">6</md-option> <md-option value="7">7</md-option> <md-option value="8">8</md-option> <md-option value="9">9</md-option> </md-select> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Raza</label> <md-select ng-model="newDetalle.raza"> <md-option ng-repeat="raza in razas" value="{{raza.id}}"> {{raza.nombre}} </md-option> </md-select> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Cantidad</label> <input type="number" ng-model="newDetalle.cantidad"> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Nro de caravana inicial</label> <input type="number" ng-model="newDetalle.nro_caravana_inicial"> </md-input-container> <md-button class="md-icon-button" ng-click="cargarDetalleCompra(newDetalle)"> <md-icon><i class="material-icons">add</i></md-icon> </md-button> </div> </md-content> <!-- Este seria el listado de detalles de compra --> <md-content> <md-table-container> <table md-table md-row-select multiple ng-model="seleccionDetalleCompra" md-progress="promise"> <thead md-head md-order="" md-on-reorder=""> <tr md-row> <th md-column>Categoria</th> <th md-column>Carimbo</th> <th md-column>Raza</th> <th md-column>Cantidad</th> <th md-column>Caravanas</th> </tr> </thead> <tbody md-body> <tr md-row md-select="detalle_compra" md-select-id="id" md-auto-select ng-repeat="detalle_compra in newCompra.detalle_compra"> <td md-cell>{{detalle_compra.categoria}}</td> <td md-cell>{{detalle_compra.carimbo}}</td> <td md-cell>{{detalle_compra.raza}}</td> <td md-cell>{{detalle_compra.cantidad}}</td> <td md-cell>{{detalle_compra.caravana_inicial}} a {{detalle_compra.caravana_inicial + detalle_compra.cantidad}} </td> </tr> <tr> <td md-cell colspan="6" ng-show="newCompra.detalle_compra.length == 0"><p style="text-align: center" flex>No hay detalles de compras cargados</p></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-limit-options="[5, 10, 15]" md-page="query.page" md-total="{{compras.count}}" md-on-paginate="updateListadoCompras" md-page-select></md-table-pagination> </md-content> </md-card> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="guardarCompra(newCompra)" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </md-dialog>'),a.put("views/dialogs/dialogo_eliminar_animal.html",'<md-dialog aria-label="Animales" ng-cloak> <form> <md-toolbar> <div class="md-toolbar-tools"> <h2>Eliminar Animales</h2> <span flex></span> <md-button class="md-icon-button" ng-click="cancel()"> <md-icon><i class="material-icons">close</i> </md-icon> </md-button> </div> </md-toolbar> <md-dialog-content> <div class="md-dialog-content"> <h2>Estas seguro que quieres eliminar?</h2> <md-card> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Animales</span> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column><span>Caravana</span></th> <th md-column><span>Categoria</span></th> <th md-column>Carimbo</th> <th md-column>Raza</th> <th md-column>Peso Específico (Kg.)</th> <th md-column>Estado Sanitario</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="animal in lista | limitTo: query.limit : (query.page -1) * query.limit"> <td md-cell md-numeric>[[animal.caravana]]</td> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell md-numeric>[[animal.carimbo]]</td> <td md-cell>[[animal.raza_nombre]]</td> <td md-cell md-numeric>[[animal.peso_especifico]]</td> <td md-cell>[[animal.estado_sanitario_display]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-page="query.page" md-total="[[archivo.length]]" md-page-select="options.pageSelect" md-on-paginate="logPagination"></md-table-pagination> </md-card> </div> </md-dialog-content> <md-dialog-actions layout="row"> <span flex></span> <md-button ng-click="answer(\'cancelar\')"> No estoy seguro. </md-button> <md-button ng-click="answer(\'guardar\')" style="margin-right:20px"> Sí, eliminar. </md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_evento.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Sanitación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Descripción</label> <input type="text" ng-model="newEvento.nombre" required> </md-input-container> <md-input-container> <label>Veterinario</label> <input type="text" ng-model="newEvento.veterinario" required> </md-input-container> <md-input-container ng-hide="newEvento.start && !newEvento.id"> <label>Fecha de Inicio</label> <input type="date" ng-model="newEvento.start" required> </md-input-container> <md-input-container ng-hide="newEvento.end && !newEvento.id"> <label>Fecha de Fin</label> <input type="date" ng-model="newEvento.end" required> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button ng-show="newEvento.id" ng-click="deleteEvento(newEvento)" class="red-text">Eliminar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> <md-button ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_inseminacion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Inseminación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form ng-show="pajuelas.length >= 1"> <md-dialog-content> <div> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha" required> </md-input-container> <md-input-container> <label>Pajuela</label> <md-select ng-model="form.pajuela"> <md-option ng-repeat="pajuela in pajuelas" value="[[pajuela.id]]"> [[pajuela.nombre]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </div> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="pajuelas.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_lote.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Lote</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form layout="column" layout-padding ng-show="potreros.length >= 1"> <md-input-container> <label>Nombre</label> <input ng-model="newLote.nombre"> </md-input-container> <md-input-container> <label>Potrero</label> <md-select ng-model="newLote.potrero"> <md-option ng-repeat="potrero in potreros" value="[[potrero.id]]"> [[potrero.nombre]] </md-option> </md-select> </md-input-container> <md-input-container> <label>Peso Promedio</label> <input ng-model="newLote.peso_promedio"> </md-input-container> <md-input-container> <label>Cantidad</label> <input ng-model="newLote.animales.length" disabled> </md-input-container> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="potreros.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_mortandad.html",'<md-dialog layout="column" aria-label="Mortandad" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Mortandad/Abigeo</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha"> </md-input-container> <md-input-container> <label>Tipo</label> <md-select ng-model="form.tipo"> <md-option value="M"> Mortandad </md-option> <md-option value="A"> Abigeo </md-option> </md-select> </md-input-container> <md-input-container> <label>Descripción</label> <input ng-model="form.razon"> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_mudar_animal.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Mudar a Lote existente</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <form layout="column" ng-show="lotes.length >= 1"> <md-input-container class="block"> <label>Lote</label> <md-select ng-model="form.lote"> <md-option ng-repeat="lote in lotes" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> </form> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="lotes.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_nutricion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Nutrición</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Tipo</label> <md-select ng-model="newNutricion.tipo_nutricion"> <md-option value="Cría"> Cría </md-option> <md-option value="Engorde"> Engorde </md-option> </md-select> </md-input-container> <md-input-container> <label>Tipo de Alimento</label> <md-select ng-model="newNutricion.tipo_comida"> <md-option ng-repeat="alimento in alimentos" value="[[alimento]]"> [[alimento]] </md-option> </md-select> </md-input-container> <md-input-container ng-show="newNutricion.tipo_comida == \'Otros\'"> <label>Tipo de Alimento (Otro)</label> <input ng-model="form.tipo_comida" required> </md-input-container> <md-input-container> <label>Descripcion de Alimento</label> <input ng-model="newNutricion.descripcion_comida"> </md-input-container> <md-input-container> <label>Fecha de Inicio</label> <input type="date" ng-model="newNutricion.fecha_inicio" required> </md-input-container> <md-input-container> <label>Fecha de Fin</label> <input type="date" ng-model="newNutricion.fecha_fin" required> </md-input-container> <div layout="row" ng-show="newNutricion.fecha_inicio && newNutricion.fecha_fin"> <md-input-container flex> <label>Gramos por Día (p/cabeza)</label> <input ng-model="form.gramos" required ng-change="calculo_kilos(form.gramos)"> </md-input-container> <md-input-container flex> <label>Total kilos (p/cabeza)</label> <input ng-model="form.kilos" required ng-change="calculo_kilos(form.kilos)"> </md-input-container> </div> <md-input-container> <label>Lotes</label> <md-select multiple ng-model="newNutricion.lotes"> <md-option ng-repeat="lote in lotes" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_potrero.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Potrero</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Nombre</label> <input ng-model="newPotrero.nombre" required> </md-input-container> <md-input-container> <label>Superficie (Ha.)</label> <input ng-model="newPotrero.superficie"> </md-input-container> <md-input-container> <label>Uso</label> <input ng-model="newPotrero.uso"> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_recategorizar_animal.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Recategorizar</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form ng-show="categorias.length >= 1"> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Categoria</label> <md-select ng-model="form.categoria"> <md-option ng-repeat="categoria in categorias" value="[[categoria.id]]"> [[categoria.nombre]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="categorias.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_vacunacion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Inseminación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content> <div> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha" required> </md-input-container> <md-input-container> <label>Sanitacion</label> <md-select ng-model="form.sanitacion"> <md-option ng-repeat="sanitacion in sanitaciones" value="[[sanitacion.id]]"> [[sanitacion.title]] </md-option> </md-select> </md-input-container> <md-input-container> <label>Vacuna</label> <md-select ng-model="form.vacuna"> <md-option ng-repeat="vacuna in vacunas" value="[[vacuna.id]]"> [[vacuna.nombre]] - [[vacuna.nombre_cientifico]] </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </div> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="sanitaciones.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/establecimiento.html",'<div layout-padding> <h1 class="md-display-1 green-text">Establecimiento</h1> </div> <div layout="row"> <md-card flex layout="column" class="center action" ng-click="go(\'/potrero\')"> <div flex class="md-toolbar-tools green darken-1"> <span flex></span> <p class="white-text md-title">Potreros</p> <span flex></span> </div> </md-card> <md-card flex layout="column" class="center action" ng-click="go(\'/compra\')"> <div flex class="md-toolbar-tools green darken-1"> <span flex></span> <p class="white-text md-title">Compra de animales</p> <span flex></span> </div> </md-card> <md-card flex layout="column" class="center action" ng-click="go(\'/venta\')"> <div flex class="md-toolbar-tools green darken-1"> <span flex></span> <p class="white-text md-title">Venta de animales</p> <span flex></span> </div> </md-card> </div>'),a.put("views/inventario.html",'<div layout="column"> <div> <h1 class="md-display-1 green-text">Inventario</h1> </div> <!-- LOTES --> <section> <div layout-padding> <h2 class="md-headline green-text">Lotes</h2> </div> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedLotes.length"> <div class="md-toolbar-tools"> <span>Lotes</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editLote()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedLotes.length"> <div class="md-toolbar-tools"> <span>[[selectedLotes.length]] [[selectedLotes.length > 1 ? \'lotes seleccionados\' : \'lote seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedLotes.length == 1" ng-click="editLote(selectedLotes[0])" aria-label="Editar Lote"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedLotes.length == 1" ng-click="deleteLote(selectedLotes[0])" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select ng-model="selectedLotes" md-progress="promiseLotes"> <thead md-head md-order="queryLotes.ordering" md-on-reorder="getLotes"> <tr md-row md-select-id="id"> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-order-by="potrero__nombre"><span>Potrero</span></th> <th md-column md-numeric md-order-by="peso_promedio">Peso promedio (Kg.)</th> <th md-column md-numeric md-order-by="cantidad">Cantidad</th> <th md-column>En servicio</th> <th md-column>Dietas Activas</th> </tr> </thead> <tbody md-body> <tr md-row md-select="lote" md-select-id="id" md-auto-select ng-repeat="lote in lotes.results"> <td md-cell>[[lote.nombre]]</td> <td md-cell>[[lote.potrero_nombre]]</td> <td md-cell>[[lote.peso_promedio]]</td> <td md-cell>[[lote.animales.length]]</td> <td md-cell>No</td> <td md-cell>Ninguna</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryLotes.page" md-total="[[lotes.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getLotes" md-page-select></md-table-pagination> </md-card> </section> <!-- ANIMALES --> <div layout="row" layout-sm="column" layout-align="space-around" ng-show="onLoadExcel"> <md-progress-circular md-mode="indeterminate"></md-progress-circular> </div> <section> <div layout-padding> <h2 class="md-headline green-text">Animales</h2> </div> <md-card layout-padding> <div layout="row"> <md-input-container class="md-block" flex> <label>Lote</label> <md-select ng-model="queryAnimales.lote" aria-label="Lote" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="lote in lotes.results" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Categoria</label> <md-select ng-model="queryAnimales.categoria" aria-label="Categoria" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="cat in categorias.results" value="[[cat.id]]"> [[cat.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Raza</label> <md-select ng-model="queryAnimales.raza" aria-label="Raza" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="raza in razas.results" value="[[raza.id]]"> [[raza.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Carimbo</label> <md-select ng-model="queryAnimales.carimbo" aria-label="Carimbo" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="carimbo in [0,1,2,3,4,5,6,7,8,9]" value="[[carimbo]]"> [[carimbo]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Estado Sanitario</label> <md-select ng-model="queryAnimales.estado_sanitario" aria-label="Estado Sanitario" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="estado in estados_sanitarios" value="[[estado.c]]"> [[estado.display]] </md-option> </md-select> </md-input-container> </div> </md-card> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedAnimales.length"> <div class="md-toolbar-tools"> <span>Animales</span> <span flex></span> <md-button> <label for="file"> <md-icon><i class="material-icons">file_upload</i> </md-icon>Importar </label> </md-button> <input id="file" type="file" ng-model="model.file" change="handleFile(model)" hidden> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i></md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-hide="selection.length"> <md-button ng-click="editAnimal()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedAnimales.length"> <div class="md-toolbar-tools"> <span>[[selectedAnimales.length]] [[selectedAnimales.length > 1 ? \'animales seleccionados\' : \'animal seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedAnimales.length == 1" ng-click="editAnimal(selectedAnimales[0])" aria-label="Editar Animal"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedAnimales.length == 1" ng-click="deleteAnimal(selectedAnimales[0])" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedAnimales.length > 1" ng-click="deleteListaAnimal(selectedAnimales)" aria-label="Delete Animal"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button green-text text-darken-4" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons green-text text-darken-4">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="agruparEnLote(selectedAnimales)"> <p>Agrupar en Lote nuevo</p> </md-button> </md-menu-item> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="mudarAnimales(selectedAnimales)"> <p>Mudar a Lote existente</p> </md-button> </md-menu-item> <md-divider ng-show="selectedAnimales.length"></md-divider> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="recategorizar(selectedAnimales)"> <p>Recategorizar</p> </md-button> </md-menu-item> <md-divider ng-show="selectedAnimales.length"></md-divider> <md-menu-item ng-show="selectedAnimales.length"> <md-button ng-click="mortandad(selectedAnimales)"> <p>Declarar Mortandad/Abigeo</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select multiple ng-model="selectedAnimales" md-progress="promiseAnimales"> <thead md-head md-order="queryAnimales.ordering" md-on-reorder="getAnimales"> <tr md-row md-select-id="id"> <th md-column md-order-by="lote__nombre">Lote</th> <th md-column md-order-by="categoria__nombre"><span>Categoria</span></th> <th md-column md-numeric md-order-by="carimbo">Carimbo</th> <th md-column md-numeric md-order-by="peso_especifico">Peso específico (Kg.)</th> <th md-column md-order-by="estado_sanitario">Estado Sanitario</th> <th md-column md-numeric md-order-by="caravana"><span>Caravana</span></th> <th md-column md-order-by="raza__nombre">Raza</th> </tr> </thead> <tbody md-body> <tr md-row md-select="animal" md-select-id="id" md-auto-select ng-repeat="animal in animales.results"> <td md-cell>[[animal.lote_nombre || \'No asignado\']]</td> <td md-cell>[[animal.categoria_nombre]]</td> <td md-cell>[[animal.carimbo]]</td> <td md-cell>[[animal.peso_especifico]]</td> <td md-cell>[[animal.estado_sanitario_display]]</td> <td md-cell>[[animal.caravana]]</td> <td md-cell>[[animal.raza_nombre]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryAnimales.page" md-total="[[animales.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getAnimales" md-page-select></md-table-pagination> </md-card> </section> <!-- MORTANDAD & ABIGEO\n    <section>\n        <div layout-padding>\n            <h2 class="md-headline green-text">Mortandad y Abigeo</h2>\n        </div>\n        <md-card>\n            <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedMortandad.length">\n                <div class="md-toolbar-tools">\n                    <span>Mortandad y Abigeo</span>\n                </div>\n            </md-toolbar>\n            <md-table-container>\n                <table md-table md-progress="promiseMortandad">\n                    <thead md-head md-order="queryMortandad.ordering" md-on-reorder="getMortandad">\n                    <tr md-row>\n                        <th md-column md-order-by="lote__nombre">Lote</th>\n                        <th md-column md-order-by="categoria__nombre"><span>Categoria</span></th>\n                        <th md-column md-numeric md-order-by="carimbo">Carimbo</th>\n                        <th md-column md-numeric md-order-by="peso_especifico">Peso específico (Kg.)</th>\n                        <th md-column md-order-by="estado_sanitario">Estado Sanitario</th>\n                        <th md-column md-numeric md-order-by="caravana"><span>Caravana</span></th>\n                        <th md-column md-order-by="raza__nombre">Raza</th>\n                    </tr>\n                    </thead>\n                    <tbody md-body>\n                    <tr md-row md-select="animal" md-select-id="id" md-auto-select ng-repeat="animal in animales.results">\n\n                        <td md-cell>[[animal.lote_nombre || \'No asignado\']]</td>\n                        <td md-cell>[[animal.categoria_nombre]]</td>\n                        <td md-cell>[[animal.carimbo]]</td>\n                        <td md-cell>[[animal.peso_especifico]]</td>\n                        <td md-cell>[[animal.estado_sanitario_display]]</td>\n                        <td md-cell>[[animal.caravana]]</td>\n                        <td md-cell>[[animal.raza_nombre]]</td>\n                    </tr>\n                    </tbody>\n                </table>\n            </md-table-container>\n            <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryAnimales.page" md-total="[[animales.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getAnimales" md-page-select></md-table-pagination>\n        </md-card>\n    </section>--> </div>'),a.put("views/login.html",'<div layout="row" layout-sm="row" layout-xs="column"> <div flex></div> <div flex id="login_view" layout-padding ng-controller="LoginCtrl"> <md-card> <img src="images/logo.1dab0356.jpg" class="md-card-image" alt="Washed Out"> <md-card-title> <md-card-title-text> <span class="md-headline">Login</span> </md-card-title-text> </md-card-title> <md-card-content> <form role="form" layout="column" ng-submit="login(loginForm)" name="loginForm"> <md-input-container> <label>Nombre de usuario</label> <input ng-model="model.username" type="text"> </md-input-container> <md-input-container> <label>Contraseña</label> <input ng-model="model.password" type="password"> </md-input-container> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" type="submit" class="md-primary">Ingresar</md-button> </div> <div class="red-text" ng-repeat="error in errors.password">[[error]]</div> <div class="red-text" ng-repeat="error in errors.non_field_errors">[[error]]</div> <div class="red-text" ng-if="error">[[error]]</div> </form> </md-card-content> </md-card> </div> <div flex></div> </div>'),
a.put("views/logout.html","<p>This is the logout view.</p>"),a.put("views/main.html",'<div layout="row"> <md-card flex="20" ng-repeat="e in establecimientos" class="green"> <md-card-title> <md-card-title-text> <span class="md-headline white-text">[[e.nombre]]</span> </md-card-title-text> <md-card-title-media> <div class="md-media-lg card-media"></div> </md-card-title-media> </md-card-title> <md-card-actions layout="row" layout-align="end center"> <md-button ng-click="seleccionar(e)" class="white-text">Continuar</md-button> </md-card-actions> </md-card> </div>'),a.put("views/nutricion.html",'<div layout-padding> <h1 class="md-display-1 green-text">Nutrición</h1> </div> <section> <div layout-padding> <h2 class="md-headline green-text">Dietas Activas</h2> </div> <md-card layout-padding> <div layout="row"> <md-input-container class="md-block" flex> <label>Lote</label> <md-select ng-model="queryDietas.lotes" aria-label="Lote" ng-change="getDietas()"> <md-option value="todos"> Todos </md-option> <md-option ng-repeat="lote in lotes.results" value="[[lote.id]]"> [[lote.nombre]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Tipo de nutrición</label> <md-select ng-model="queryDietas.tipo_nutricion" aria-label="Tipo de nutricion" ng-change="getDietas()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="tipo in [\'Cría\',\'Engorde\']" value="[[tipo]]"> [[tipo]] </md-option> </md-select> </md-input-container> <md-input-container class="md-block" flex> <label>Raza</label> <md-select ng-model="queryAnimales.raza" aria-label="Raza" ng-change="getAnimales()"> <md-option value=""> Todos </md-option> <md-option ng-repeat="raza in razas.results" value="[[raza.id]]"> [[raza.nombre]] </md-option> </md-select> </md-input-container> </div> </md-card> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedDietas.length"> <div class="md-toolbar-tools"> <span>Dietas Activas</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editDieta()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedDietas.length"> <div class="md-toolbar-tools"> <span>[[selectedDietas.length]] [[selectedDietas.length > 1 ? \'dietas seleccionadas\' : \'dieta seleccionada\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedDietas.length == 1" ng-click="editDieta(selectedDietas[0])" aria-label="Editar Dieta"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedDietas.length == 1" ng-click="deleteDieta(selectedDietas[0])" aria-label="Delete Dieta"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select ng-model="selectedDietas" md-progress="promiseDietas"> <thead md-head md-order="queryDietas.ordering" md-on-reorder="getDietas"> <tr md-row md-select-id="id"> <th md-column md-order-by="fecha_inicio">Periodo</th> <th md-column md-order-by="tipo_nutricion">Tipo de Nutrición</th> <th md-column md-order-by="tipo_comida">Tipo de Alimento</th> <th md-column md-order-by="descripcion_comida">Descrip. de Alimento</th> <th md-column md-numeric md-order-by="kilos">Total kg.(p/cabeza)</th> <th md-column>Lotes</th> </tr> </thead> <tbody md-body> <tr md-row md-select="dieta" md-select-id="id" md-auto-select ng-repeat="dieta in dietas.results"> <td md-cell>[[dieta.fecha_inicio | date:\'dd/MM/yyyy\']] - [[dieta.fecha_fin | date:\'dd/MM/yyyy\']]</td> <td md-cell>[[dieta.tipo_nutricion]]</td> <td md-cell>[[dieta.tipo_comida]]</td> <td md-cell>[[dieta.descripcion_comida]]</td> <td md-cell>[[dieta.kilos]]</td> <td md-cell><div ng-repeat="lote in dieta.lotes_completo">[[lote.nombre]]</div></td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryDietas.page" md-total="[[dietas.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getDietas" md-page-select></md-table-pagination> </md-card> </section>'),a.put("views/potrero.html",'<section> <div> <h1 class="md-display-1 green-text">Establecimiento</h1> </div> </section> <section> <div layout-padding> <h2 class="md-headline green-text">Potreros</h2> </div> <md-card> <md-toolbar class="md-table-toolbar md-default" ng-hide="selectedPotreros.length"> <div class="md-toolbar-tools"> <span>Potreros</span> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i> </md-icon> </md-button> <md-menu-content width="4"> <md-menu-item> <md-button ng-click="editPotrero()"> <p>Agregar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <md-toolbar class="md-table-toolbar green lighten-4 green-text text-darken-4" ng-show="selectedPotreros.length"> <div class="md-toolbar-tools"> <span>[[selectedPotreros.length]] [[selectedPotreros.length > 1 ? \'potreros seleccionados\' : \'potrero seleccionado\']]</span> <span flex></span> <md-button class="md-icon-button" ng-show="selectedPotreros.length == 1" ng-click="editPotrero(selectedPotreros[0])" aria-label="Editar Lote"> <md-icon><i class="material-icons green-text text-darken-4">edit</i> </md-icon> </md-button> <md-button class="md-icon-button green-text text-darken-4" ng-show="selectedPotreros.length == 1" ng-click="deletePotrero(selectedPotreros[0])" aria-label="Delete Potrero"> <md-icon><i class="material-icons green-text text-darken-4">delete</i> </md-icon> </md-button> </div> </md-toolbar> <!-- exact table from live demo --> <md-table-container> <table md-table md-row-select ng-model="selectedPotreros" md-progress="promisePotreros"> <thead md-head md-order="queryPotreros.ordering" md-on-reorder="getPotreros"> <tr md-row md-select-id="id"> <th md-column md-order-by="nombre"><span>Nombre</span></th> <th md-column md-numeric md-order-by="superficie"><span>Superficie (Ha.)</span></th> <th md-column md-order-by="uso">Uso</th> </tr> </thead> <tbody md-body> <tr md-row md-select="potrero" md-select-id="id" md-auto-select ng-repeat="potrero in potreros.results"> <td md-cell>[[potrero.nombre]]</td> <td md-cell>[[potrero.superficie]]</td> <td md-cell>[[potrero.uso]]</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-label="{page: \'Página:\', rowsPerPage: \'Filas por página:\', of: \'de\'}" md-limit="20" md-page="queryPotreros.page" md-total="[[potreros.count]]" md-page-select="options.pageSelect" md-boundary-links="options.boundaryLinks" md-on-paginate="getPotreros" md-page-select></md-table-pagination> </md-card> </section>'),a.put("views/sanitacion.html",'<h1 class="md-display-1 green-text">Sanitación</h1> <section> <md-card> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Calendario de Sanitación</h2> </div> </md-toolbar> <md-content> <br> <md-button ng-hide="selection.length" ng-click="agregarEvento()" class="lime-text">Agendar vacunación</md-button> <br> <div id="calendar" style="cursor:pointer"></div> </md-content> </md-card> </section>')}]);
