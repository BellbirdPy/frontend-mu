"use strict";angular.module("frontendmuApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngMaterial"]).config(["$routeProvider","$mdThemingProvider","$httpProvider","$resourceProvider",function(a,b,c,d){c.defaults.xsrfCookieName="csrftoken",c.defaults.xsrfHeaderName="X-CSRFToken",d.defaults.stripTrailingSlashes=!1,b.theme("default").primaryPalette("green").accentPalette("lime",{"default":"500"}),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus(!0)}]}}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus()}]}}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/logout",{templateUrl:"views/logout.html",controller:"LogoutCtrl",controllerAs:"logout",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus(!0)}]}}).when("/inventario",{templateUrl:"views/inventario.html",controller:"InventarioCtrl",controllerAs:"inventario",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus(!0)}]}}).when("/establecimiento",{templateUrl:"views/establecimiento.html",controller:"EstablecimientoCtrl",controllerAs:"establecimiento",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus(!0)}]}}).when("/potrero",{templateUrl:"views/potrero.html",controller:"PotreroCtrl",controllerAs:"potrero",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus(!0)}]}}).when("/nutricion",{templateUrl:"views/nutricion.html",controller:"NutricionCtrl",controllerAs:"nutricion",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus(!0)}]}}).when("/sanitacion",{templateUrl:"views/sanitacion.html",controller:"SanitacionCtrl",controllerAs:"sanitacion",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus(!0)}]}}).when("/dashboard",{templateUrl:"views/dashboard.html",controller:"DashboardCtrl",controllerAs:"dashboard",resolve:{authenticated:["DjangoAuth",function(a){return a.authenticationStatus(!0)}]}}).when("/compra",{templateUrl:"views/compra.html",controller:"CompraCtrl",controllerAs:"compra"}).otherwise({redirectTo:"/"})}]).run(["DjangoAuth",function(a){a.initialize("//localhost:8000/rest-auth",!1)}]),angular.module("frontendmuApp").controller("MainCtrl",["$scope","ServerData","Establecimiento","$location",function(a,b,c,d){a.establecimientos=[],a.obj=b,c.query(function(b){a.establecimientos=b}),a.seleccionar=function(b){a.obj.establecimiento=b,d.path("/inventario/")}}]),angular.module("frontendmuApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("frontendmuApp").service("DjangoAuth",["$q","$http","$cookies","$rootScope","$location","ServerData",function(a,b,c,d,e,f){var g={API_URL:"localhost:8000/rest-auth",use_session:!0,authenticated:null,authPromise:null,request:function(d){c.token&&(b.defaults.headers.common.Authorization="Token "+c.get("token")),h=d.params||{},d=d||{};var e=a.defer(),f=this.API_URL+d.url,g=d.method||"GET",h=h,i=d.data||{};return b({url:f,withCredentials:this.use_session,method:g.toUpperCase(),headers:{"X-CSRFToken":c.csrftoken},params:h,data:i}).success(angular.bind(this,function(a,b,c,d){e.resolve(a,b)})).error(angular.bind(this,function(a,b,c,d){console.log("error syncing with: "+f),a&&(a.status=b),0==b&&(""==a&&(a={},a.status=0,a.non_field_errors=["Could not connect. Please try again."]),null==a&&(a={},a.status=0,a.non_field_errors=["Server timed out. Please try again."])),e.reject(a,b,c,d)})),e.promise},register:function(a,b,c,d,e){var f={username:a,password1:b,password2:c,email:d};return f=angular.extend(f,e),this.request({method:"POST",url:"/registration/",data:f})},login:function(a,e){var f=this;return this.request({method:"POST",url:"/login/",data:{username:a,password:e}}).then(function(a){f.use_session||(b.defaults.headers.common.Authorization="Token "+a.key,c.token=a.key),f.authenticated=!0,d.$broadcast("djangoAuth.logged_in",a)})},logout:function(){var a=this;delete b.defaults.headers.common.Authorization,delete c.token,a.authenticated=!1,d.$broadcast("djangoAuth.logged_out");var e=f;return e.establecimiento="",this.request({method:"POST",url:"/logout/"}).then(function(e){delete b.defaults.headers.common.Authorization,delete c.token,a.authenticated=!1,d.$broadcast("djangoAuth.logged_out")})},changePassword:function(a,b){return this.request({method:"POST",url:"/password/change/",data:{new_password1:a,new_password2:b}})},resetPassword:function(a){return this.request({method:"POST",url:"/password/reset/",data:{email:a}})},profile:function(){return this.request({method:"GET",url:"/user/"})},updateProfile:function(a){return this.request({method:"PATCH",url:"/user/",data:a})},verify:function(a){return this.request({method:"POST",url:"/registration/verify-email/",data:{key:a}})},confirmReset:function(a,b,c,d){return this.request({method:"POST",url:"/password/reset/confirm/",data:{uid:a,token:b,new_password1:c,new_password2:d}})},authenticationStatus:function(b,c){b=b||!1,c=c||!1,(null==this.authPromise||c)&&(this.authPromise=this.request({method:"GET",url:"/user/"}));var d=this,e=a.defer();return null==this.authenticated||c?this.authPromise.then(function(){d.authenticated=!0,e.resolve()},function(){d.authenticated=!1,b?e.reject("User is not logged in."):e.resolve()}):0==this.authenticated&&b?e.reject("User is not logged in."):e.resolve(),e.promise},initialize:function(a,b){return this.API_URL=a,this.use_session=b,this.authenticationStatus()}};return g}]),angular.module("frontendmuApp").controller("LoginCtrl",["$scope","$location","DjangoAuth","Validate",function(a,b,c,d){c.authenticated&&b.path("/"),a.model={username:"",password:""},a.complete=!1,a.login=function(e){a.errors=[],d.form_validation(e,a.errors),e.$invalid||c.login(a.model.username,a.model.password).then(function(a){b.path("/")},function(b){a.errors=b})}}]),angular.module("frontendmuApp").service("Validate",function(){return{message:{minlength:"This value is not long enough.",maxlength:"This value is too long.",email:"A properly formatted email address is required.",required:"This field is required."},more_messages:{demo:{required:"Here is a sample alternative required message."}},check_more_messages:function(a,b){return(this.more_messages[a]||[])[b]||null},validation_messages:function(a,b,c){var d=[];for(var e in b[a].$error)if(b[a].$error[e]){var f=this.check_more_messages(a,e);f?d.push(f):this.message[e]?d.push(this.message[e]):d.push("Error: "+e)}var g=[];angular.forEach(d,function(a,b){-1===g.indexOf(a)&&g.push(a)}),c&&(c[a]=g)},form_validation:function(a,b){for(var c in a)"$"!=c.substr(0,1)&&this.validation_messages(c,a,b)}}}),angular.module("frontendmuApp").controller("LogoutCtrl",["$scope","$location","DjangoAuth","ServerData",function(a,b,c,d){c.logout()}]),angular.module("frontendmuApp").controller("MasterCtrl",["$scope","$location","DjangoAuth","ServerData",function(a,b,c,d){a.obj=d,a.authenticated=!1,a.logout=function(){b.path("/logout/")},c.authenticationStatus(!0).then(function(){a.authenticated=!0}),a.$on("djangoAuth.logged_out",function(){a.authenticated=!1,b.path("/login/")}),a.$on("djangoAuth.logged_in",function(){a.authenticated=!0}),a.$on("$routeChangeError",function(a,c,d,e){console.error("Unable to change routes.  Error: ",e),b.path("/login/")})}]),angular.module("frontendmuApp").service("ServerData",function(){return{establecimiento:""}}),angular.module("frontendmuApp").factory("Establecimiento",["$resource",function(a){return a("http://localhost:8000/api/establecimiento/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("InventarioCtrl",["$scope","$filter","$mdDialog","Animal","Lote","ServerData",function(a,b,c,d,e,f){var g=f;a.animales=[],a.lotes=[],a.sortType="caravana",a.sortReverse=!1,a.searchAnimal="",a.searchAnimalLote="",a.selection=[],a.selectionLote=[],a.selectionCant=0,a.selectedAll=!1,a.cargandoAnimal=!1,a.cargandoLote=!1,d.query({establecimiento:g.establecimiento.id},function(b){a.animales=b,a.cargandoAnimal=!0}),e.query({establecimiento:g.establecimiento.id},function(b){a.lotes=b,a.cargandoLote=!0}),a.updateLote=function(){e.query({establecimiento:g.establecimiento.id},function(b){a.lotes=b,a.cargandoLote=!0})},a.updateAnimal=function(){d.query({establecimiento:g.establecimiento.id},function(b){a.animales=b,a.cargandoAnimal=!0})},a.filterPorLote=function(b){if(a.selectionLote.length>0){if(!b.lote)return!1;if(-1===a.selectionLote.indexOf(b.lote.toString()))return!1}return!0},a.filterPorSearch=function(b){return b.caravana.toLowerCase().indexOf(a.searchAnimal)>-1?!0:b.carimbo.toString().toLowerCase().indexOf(a.searchAnimal)>-1?!0:b.categoria_nombre.toLowerCase().indexOf(a.searchAnimal)>-1?!0:b.raza_nombre.toLowerCase().indexOf(a.searchAnimal)>-1?!0:!1},a.selectAll=function(){angular.forEach(a.animales,function(b){b.selected=a.selectedAll;var c=a.selection.indexOf(b.id);-1===c?a.selectedAll&&a.selection.push(b.id):a.selectedAll||a.selection.splice(c,1)}),a.verificarMensaje()},a.toggleLote=function(b){var c=a.selectionLote.indexOf(b.toString());a.searchAnimalLote=c,-1===c?a.selectionLote.push(b.toString()):a.selectionLote.splice(c,1)},a.toggle=function(b){var c=a.selection.indexOf(b);-1===c?a.selection.push(b):a.selection.splice(c,1),a.verificarMensaje()},a.verificarMensaje=function(){1===a.selection.length?a.mensaje="animal seleccionado":a.selection.length>1?a.mensaje="animales seleccionados":a.mensaje="";var b=a.selection.length;b>0?a.selectionCant=a.selection.length:a.selectionCant=""},a.changeLote=function(b){b.selected?(b.selected=!1,a.toggleLote(b.id)):(b.selected=!0,a.toggleLote(b.id))},a.change=function(b){b.selected?(b.selected=!1,a.toggle(b.id)):(b.selected=!0,a.toggle(b.id))},a.deleteAnimal=function(e){var f=b("filter")(a.animales,{id:a.selection[0]},!0)[0];console.log(f);var g=c.confirm().title("Estas seguro de que quieres eliminar?").textContent(f.categoria_nombre+"- Caravana: "+f.caravana+" - Raza: "+f.raza_nombre+" - Carimbo: "+f.carimbo).ariaLabel("Eliminar Animal").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(g).then(function(){d["delete"]({id:f.id},f,function(b){a.updateLote()})},function(){console.log("Cancelaste")})},a.deleteLote=function(d){a.loteSeleccionado2=b("filter")(a.lotes,{id:a.selectionLote[0]},!1)[0];var f=c.confirm().title("Estas seguro de que quieres eliminar?").content("Lote: "+a.loteSeleccionado2.nombre+"<br>Potrero: "+a.loteSeleccionado2.potrero_nombre+"<br>Cantidad de animales: "+a.loteSeleccionado2.animales.length+"<br>").ariaLabel("Lucky day").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(f).then(function(){e["delete"]({id:d},a.loteSeleccionado2,function(a){console.log(a)}),a.lotes.splice(a.lotes.indexOf(a.loteSeleccionado2),1),a.selectionLote=[],a.updateAnimal()},function(){a.status="Se eliminó correctamente."})},a.cargarDetalle=function(c){var d=b("filter")(a.animales,{id:c},!0)[0];a.cargar(d)},a.cargarDetalleRecategorizar=function(){var c=[];angular.forEach(a.selection,function(d){var e=b("filter")(a.animales,{id:d},!0)[0];c.push(e)}),a.cargarRecategorizar(c)},a.cargarDetalleMortandad=function(){var c=[];angular.forEach(a.selection,function(d){var e=b("filter")(a.animales,{id:d},!0)[0];c.push(e)}),a.cargarMortandad(c)},a.cargarDetalleLote=function(c){var d=b("filter")(a.lotes,{id:parseInt(c)},!0)[0];a.cargarLote(d)},a.cargarDetalleMudar=function(){var c=[];angular.forEach(a.selection,function(d){var e=b("filter")(a.animales,{id:d},!0)[0];c.push(e)}),a.cargarMudar(c)},a.cargar=function(d){c.show({templateUrl:"views/dialogs/dialogo_animal.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Categoria","Raza","Lote",function(a,b,c,e,f,h){a.categorias=[],a.razas=[],a.lotes=[],a.lotes=h.query({establecimiento:g.establecimiento.id},function(b){a.lotes=b}),a.categorias=e.query(function(b){a.categorias=b}),a.razas=f.query(function(b){a.razas=b}),a.newAnimal={},d&&(a.newAnimal=d),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(e){if("guardar"===e)if(d)console.log(a.newAnimal),c.update({id:a.newAnimal.id},a.newAnimal,function(c){a.newAnimal=c,b.hide(a.newAnimal)});else{a.newAnimal.estado="V",a.newAnimal.establecimiento=g.establecimiento.id;var f=new c(a.newAnimal);f.$save(function(){},function(a){console.log(a)}),b.hide(f)}}}]}).then(function(c){if(console.log(c),c!==!0){var d=b("filter")(a.animales,{id:c.id},!0)[0];d&&d.id===c.id?angular.extend(d,c):a.animales.unshift(c)}a.updateLote()},function(){a.alert="You cancelled the dialog."})},a.cargarLote=function(d){c.show({templateUrl:"views/dialogs/dialogo_lote.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero",function(a,b,c){a.potreros=[],a.potreros=c.query({establecimiento:g.establecimiento.id},function(b){a.potreros=b}),a.newLote={},d?a.newLote=d:(a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=g.establecimiento.id,a.newLote.animales=[]),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c)if(d)e.update({id:a.newLote.id},a.newLote,function(c){a.newLote=c,b.hide(a.newLote)});else{var f=new e(a.newLote);f.$save(function(){},function(a){console.log(a)}),b.hide(f)}}}]}).then(function(c){if(c!==!0){var d=b("filter")(a.lotes,{id:c.id},!0)[0];d&&d.id===c.id?angular.extend(d,c):a.lotes.unshift(c)}},function(){a.alert="You cancelled the dialog."})},a.agruparEnLote=function(d){c.show({templateUrl:"views/dialogs/dialogo_lote.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero",function(a,b,c){a.potreros=[],a.potreros=c.query({establecimiento:g.establecimiento.id},function(b){a.potreros=b}),a.newLote={},a.newLote.potrero="",a.newLote.cantidad=0,a.newLote.peso_promedio=0,a.newLote.establecimiento=g.establecimiento.id,a.newLote.animales=[],a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){if("guardar"===c){var f=new e(a.newLote);f.$save(function(b){b.animales=d,console.log(a.selection),e.update({id:b.id},b,function(a){console.log(a)})},function(a){console.log(a)}),b.hide(f)}}}]}).then(function(c){if(c!==!0){var d=b("filter")(a.lotes,{id:c.id},!0)[0];d&&d.id===c.id?angular.extend(d,c):a.lotes.unshift(c)}a.updateLote(),a.updateAnimal(),a.selection=[],a.verificarMensaje()},function(){a.alert="You cancelled the dialog."})},a.cargarMortandad=function(d){c.show({templateUrl:"views/dialogs/dialogo_mortandad.html",targetEvent:null,controller:["$scope","$mdDialog","Animal","Mortandad","ServerData",function(a,b,c,e,f){a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(g){if("guardar"===g&&d.length>=1){var h=[];angular.forEach(d,function(a){h.push(a.id),a.estado="M",c.update({id:a.id},a,function(a){})});var i=new e(a.form);i.establecimiento=f.establecimiento.id,i.animales=[],i.$save(function(a){a.animales=h,e.update({id:a.id},a,function(a){console.log(a)})},function(a){console.log(a)}),b.hide(d)}}}]}).then(function(c){c!==!0&&angular.forEach(c,function(c){var d=b("filter")(a.animales,{id:c.id},!0)[0];d&&d.id===c.id&&angular.extend(d,c)})},function(){a.alert="You cancelled the dialog."})},a.cargarRecategorizar=function(d){c.show({templateUrl:"views/dialogs/dialogo_recategorizar.html",targetEvent:null,controller:["$scope","$mdDialog","Categoria","Animal","$filter",function(a,b,c,e,f){a.categorias=[],a.categorias=c.query(function(b){a.categorias=b}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d.length>=1&&(angular.forEach(d,function(b){b.categoria=a.form.categoria,e.update({id:b.id},b,function(a){console.log(a)});var c=a.form.categoria;console.log(c),console.log(a.categorias);var d=f("filter")(a.categorias,{id:c})[0];console.log(d),b.categoria_nombre=d.nombre}),b.hide(d))}}]}).then(function(c){c!==!0&&angular.forEach(c,function(c){var d=b("filter")(a.animales,{id:c.id},!0)[0];console.log(d),d&&d.id===c.id&&angular.extend(d,c)})},function(){a.alert="You cancelled the dialog."})},a.cargarMudar=function(d){c.show({templateUrl:"views/dialogs/dialogo_mudar.html",targetEvent:null,controller:["$scope","$mdDialog","Lote","Animal","$filter",function(a,b,c,e,f){a.lotes=[],a.lotes=c.query({establecimiento:g.establecimiento.id},function(b){a.lotes=b}),a.form={},a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(c){"guardar"===c&&d.length>=1&&(angular.forEach(d,function(b){b.lote=a.form.lote,e.update({id:b.id},b,function(a){console.log(a)});var c=a.form.lote;console.log(c),console.log(a.lotes);var d=f("filter")(a.lotes,{id:c})[0];console.log(d),b.lote_nombre=d.nombre}),b.hide(d))}}]}).then(function(c){c!==!0&&(angular.forEach(c,function(c){var d=b("filter")(a.animales,{id:c.id},!0)[0];d&&d.id===c.id&&(c.selected=!0,angular.extend(d,c))}),a.updateLote())},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").factory("Animal",["$resource",function(a){return a("http://localhost:8000/api/animal/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Lote",["$resource",function(a){return a("http://localhost:8000/api/lote/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Potrero",["$resource",function(a){return a("http://localhost:8000/api/potrero/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").factory("Categoria",["$resource",function(a){return a("http://localhost:8000/api/categoria/:id/",null)}]),angular.module("frontendmuApp").factory("Raza",["$resource",function(a){return a("http://localhost:8000/api/raza/:id/",null)}]),angular.module("frontendmuApp").factory("Mortandad",["$resource",function(a){return a("http://localhost:8000/api/mortandad/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("EstablecimientoCtrl",["$scope","$location",function(a,b){a.go=function(a){b.path(a)}}]),angular.module("frontendmuApp").controller("PotreroCtrl",["$scope","Potrero","$mdDialog","$filter","ServerData",function(a,b,c,d,e){a.potreros=[],b.query({establecimiento:e.establecimiento.id},function(b){a.potreros=b}),a.deletePotrero=function(d){console.log(d);var e=c.confirm().title("Estas seguro de que quieres eliminar?").content("Nombre: "+d.nombre+" - Superficie: "+d.superficie+" - Uso: "+d.uso).ariaLabel("Delete potrero").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(e).then(function(){b["delete"]({id:d.id},d,function(b){console.log(b),a.potreros.splice(a.potreros.indexOf(d),1)})},function(){a.status="Se eliminó correctamente."})},a.cargarPotrero=function(b){c.show({templateUrl:"views/dialogs/dialogo_potrero.html",targetEvent:null,controller:["$scope","$mdDialog","Potrero","ServerData",function(a,c,d,e){a.newPotrero={},b?a.newPotrero=b:(a.newPotrero.nombre="",a.newPotrero.superficie="",a.newPotrero.uso="",a.newPotrero.establecimiento=e.establecimiento.id),a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(e){if("guardar"===e)if(b)d.update({id:a.newPotrero.id},a.newPotrero,function(b){a.newPotrero=b,c.hide(a.newPotrero)});else{var f=new d(a.newPotrero);f.$save(function(){},function(a){console.log(a)}),c.hide(f)}}}]}).then(function(b){if(b!==!0){var c=d("filter")(a.potreros,{id:b.id},!0)[0];c&&c.id===b.id?angular.extend(c,b):a.potreros.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").controller("NutricionCtrl",["$scope","$mdDialog","Nutricion","$filter","ServerData",function(a,b,c,d,e){a.dietas=[],c.query({establecimiento:e.establecimiento.id},function(b){a.dietas=b}),a.deleteNutricion=function(e){console.log(e);var f=b.confirm().title("Estas seguro de que quieres eliminar?").content("Tipo: "+e.tipo_nutricion+"<br>Tipo de alimento: "+e.tipo_comida+"<br>Periodo: "+d("date")(new Date(e.fecha_inicio),"dd/MM/yyyy")+" - "+d("date")(new Date(e.fecha_fin),"dd/MM/yyyy")+"<br>").ariaLabel("Delete potrero").targetEvent(e).ok("Sí, estoy seguro").cancel("Cancelar");b.show(f).then(function(){c["delete"]({id:e.id},e,function(b){console.log(b),a.dietas.splice(a.dietas.indexOf(e),1)})},function(){a.status="Se eliminó correctamente."})},a.cargarNutricion=function(c){b.show({templateUrl:"views/dialogs/dialogo_nutricion.html",targetEvent:c,controller:["$scope","$mdDialog","Nutricion","Lote","ServerData",function(a,b,d,e,f){function g(a,b){var c=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),d=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((d-c)/h)}var h=864e5;a.form={},a.calculo_kilos=function(b){var c=g(a.newNutricion.fecha_inicio,a.newNutricion.fecha_fin);console.log(c),b==a.form.gramos?a.form.kilos=b*c/1e3:a.form.gramos=b/c*1e3},a.lotes=[],e.query({establecimiento:f.establecimiento.id},function(b){a.lotes=b}),a.alimentos=["Sal mineral","Balanceado","Pastura","Núcleo","Otros"],a.newNutricion={},c&&(a.newNutricion=c,a.newNutricion.fecha_inicio=new Date(c.fecha_inicio),a.newNutricion.fecha_fin=new Date(c.fecha_fin),console.log(a.alimentos.indexOf(a.newNutricion.tipo_comida)),-1==a.alimentos.indexOf(a.newNutricion.tipo_comida)&&(a.form.tipo_comida=a.newNutricion.tipo_comida,a.newNutricion.tipo_comida="Otros"),a.form.kilos=a.newNutricion.kilos,a.calculo_kilos(a.newNutricion.kilos)),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.answer=function(e){if("guardar"===e)if(c)"Otros"==a.newNutricion.tipo_comida&&(a.newNutricion.tipo_comida=a.form.tipo_comida),a.newNutricion.kilos=a.form.kilos,d.update({id:a.newNutricion.id},a.newNutricion,function(c){a.newNutricion=c,b.hide(a.newNutricion)});else{var g=new d(a.newNutricion);"Otros"==g.tipo_comida&&(g.tipo_comida=a.form.tipo_comida),g.kilos=a.form.kilos,console.log(g),g.establecimiento=f.establecimiento.id,g.$save(function(){},function(a){console.log(a)}),b.hide(g)}}}]}).then(function(b){if(b!==!0){var c=d("filter")(a.dietas,{id:b.id},!0)[0];c&&c.id===b.id?angular.extend(c,b):a.dietas.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").factory("Nutricion",["$resource",function(a){return a("http://localhost:8000/api/nutricion/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("SanitacionCtrl",["$scope","Evento","EventoEstablecimiento","$mdDialog","$filter","ServerData",function(a,b,c,d,e,f){b.query(function(b){a.eventos=b,angular.element("#calendar").fullCalendar("addEventSource",a.eventos)}),c.query(function(b){a.eventos_establecimiento=b,console.log(a.eventos_establecimiento),angular.element("#calendar").fullCalendar("addEventSource",a.eventos_establecimiento)}),a.showAlert=function(a){d.show(d.alert().parent(angular.element(document.querySelector("#popupContainer"))).clickOutsideToClose(!0).title("Sanitación").textContent(a.title).ariaLabel("Alert Dialog").ok("OK!").targetEvent(null))},angular.element("#calendar").fullCalendar({eventClick:function(b,c,d){if(b.veterinario){var f=e("filter")(a.eventos_establecimiento,{id:b.id},!0)[0];a.agregarEvento(f)}},dayClick:function(b,c,d){var e={start:b,end:b,veterinario:"",establecimiento:f.establecimiento.id,nombre:""};a.agregarEvento(e)}}),a.agregarEvento=function(b){d.show({templateUrl:"views/dialogs/dialogo_evento.html",targetEvent:null,controller:["$scope","$mdDialog","EventoEstablecimiento","$filter","ServerData",function(a,c,d,e,f){a.newEvento={},b&&(b.id?(a.newEvento=b,a.newEvento.start=new Date(b.start),a.newEvento.end=new Date(b.end)):(a.newEvento=b,a.newEvento.start=new Date(b.start),a.newEvento.end=new Date(b.end))),a.deleteEvento=function(a){var b=c.confirm().title("Estas seguro de que quieres eliminar?").textContent(a.title).ariaLabel("Eliminar Vacunación").targetEvent(null).ok("Sí, estoy seguro").cancel("Cancelar");c.show(b).then(function(){d["delete"]({id:a.id},a,function(b){angular.element("#calendar").fullCalendar("removeEvents",[a.id])})},function(){console.log("Cancelaste")})},a.hide=function(){c.hide()},a.cancel=function(){c.cancel()},a.answer=function(e){if("guardar"===e)if(b.id)console.log(a.newEvento),d.update({id:a.newEvento.id},a.newEvento,function(b){a.newEvento=b,c.hide(a.newEvento)});else{a.newEvento.establecimiento=f.establecimiento.id;var g=new d(a.newEvento);g.$save(function(a){angular.element("#calendar").fullCalendar("addEventSource",[a])},function(a){console.log(a)}),c.hide(g)}}}]}).then(function(b){if(b&&b!==!0){var c=e("filter")(a.eventos_establecimiento,{id:b.id},!0)[0];c&&c.id===b.id?(angular.extend(c,b),angular.element("#calendar").fullCalendar("removeEvents",[b.id]),angular.element("#calendar").fullCalendar("addEventSource",[b])):a.eventos_establecimiento.unshift(b)}},function(){a.alert="You cancelled the dialog."})}}]),angular.module("frontendmuApp").factory("Evento",["$resource",function(a){return a("http://localhost:8000/api/sanitacion/eventos/:id/",null)}]),angular.module("frontendmuApp").factory("EventoEstablecimiento",["$resource",function(a){return a("http://localhost:8000/api/sanitacion/eventos_establecimiento/:id/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("DashboardCtrl",["$scope","Evento","EventoEstablecimiento","$mdDialog","$filter","ServerData",function(a,b,c,d,e,f){b.query(function(b){a.eventos=b,angular.element("#calendar").fullCalendar("addEventSource",a.eventos)}),c.query(function(b){a.eventos_establecimiento=b,console.log(a.eventos_establecimiento),angular.element("#calendar").fullCalendar("addEventSource",a.eventos_establecimiento)}),angular.element("#calendar").fullCalendar({})}]),angular.module("frontendmuApp").controller("CompraCtrl",["$scope","$filter","$mdDialog","Animal","Compra",function(a,b,c,d,e){a.compras=[],a.seleccionCompra=[],a.updateListadoCompras=function(){a.promise=e.query({establecimiento:1},function(b){a.compras=b})},a.updateListadoCompras(),a.query={order:"fecha",limit:5,page:1},a.verDetalleCompra=function(a){console.log(a)},a.abrirFormCarga=function(){c.show({templateUrl:"views/dialogs/dialogo_crear_compra.html",targetEvent:null,controller:"DialogsDialogoCrearCompraCtrl"}).then(function(){a.updateListadoCompras()})}}]),angular.module("frontendmuApp").factory("Compra",["$resource",function(a){return a("http://127.0.0.1:8000/compra/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]).factory("DetalleCompra",["$resource",function(a){return a("http://127.0.0.1:8000/detalle_compra/",null,{update:{method:"PUT"},"delete":{method:"DELETE"}})}]),angular.module("frontendmuApp").controller("DialogsDialogoCrearCompraCtrl",["$scope","$mdDialog","Animal","Categoria","Raza","ServerData","Compra",function(a,b,c,d,e,f,g){a.newCompra={},a.newDetalle={},a.newCompra.detalle_compra=[],a.categorias=d.query(function(b){a.catergorias=b}),a.razas=e.query(function(b){a.razas=b}),a.hide=function(){b.hide()},a.cancel=function(){b.cancel()},a.cargarDetalleCompra=function(b){var c={};c.categoria=b.categoria,c.carimbo=b.carimbo,c.raza=b.raza,c.cantidad=b.cantidad,c.caravana_inicial=b.nro_caravana_inicial,a.newCompra.detalle_compra.push(c),a.DetalleCompra={}},a.guardarCompra=function(b){a.newCompra.establecimiento=1;var c=new g(a.newCompra);c.$save(function(){console.log("Compra realizada")},function(a){console.log(a)}),a.hide()}}]),angular.module("frontendmuApp").run(["$templateCache",function(a){a.put("views/about.html","<p>Bellbird</p>"),a.put("views/compra.html",'<!--Section Compras --> <section> <md-card> <!-- Toolbar principal--> <md-toolbar class="green"> <div class="md-toolbar-tools white-text"> <div class="md-title">Compra</div> </div> </md-toolbar> <md-content> <!--Aca va ir el listado--> <md-card> <!-- Toolbar del listado--> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Listado de compras</span> </div> </md-toolbar> <!-- Toolbar de seleccion --> <md-toolbar class="md-table-toolbar alternate" ng-show="false"> </md-toolbar> <!-- Toolbar del buscador --> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <md-input-container flex> <label>Búsqueda</label> <input ng-model="buscarCompra"> </md-input-container> </div> </md-toolbar> <!-- Seccion de la tabla --> <md-table-container> <table md-table md-row-select multiple ng-model="seleccionCompra" md-progress="promise"> <thead md-head md-order="query.order" md-on-reorder="updateListadoCompras"> <tr md-row> <th md-column>Codigo de establecimiento vendedor</th> <th md-column>Nombre de establecimiento vendedor</th> <th md-column>Fecha</th> </tr> </thead> <tbody md-body> <tr md-row md-select="compra" md-select-id="id" md-auto-select ng-repeat="compra in compras"> <td md-cell>{{compra.cod_establecimiento_vendedor}}</td> <td md-cell>{{compra.nombre_vendedor}}</td> <td md-cell>{{compra.fecha}}</td> </tr> </tbody> </table> </md-table-container> <md-table-pagination md-limit="query.limit" md-limit-options="[5, 10, 15]" md-page="query.page" md-total="{{compras.count}}" md-on-paginate="updateListadoCompras" md-page-select></md-table-pagination> </md-card> </md-content> </md-card> </section>'),a.put("views/dashboard.html",'<h1 class="md-display-1 green-text">Dashboard</h1> <section> <md-card> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Calendario General</h2> </div> </md-toolbar> <md-content> <br> <div id="calendar" style="cursor:pointer"></div> </md-content> </md-card> </section>'),a.put("views/dialogs/dialogo_animal.html",'<md-dialog layout="column" aria-label="Cliente" style="min-width: 800px; min-height: 600px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Animal</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <md-content layout-padding> <form ng-show="razas.length >= 1 && categorias.length >= 1"> <md-input-container class="md-accent-1 md-block"> <label>Caravana</label> <input ng-model="newAnimal.caravana"> </md-input-container> <md-input-container class="md-block"> <label>Categoria</label> <md-select ng-model="newAnimal.categoria"> <md-option ng-repeat="cat in categorias" value="{{cat.id}}"> {{cat.nombre}} </md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label>Carimbo</label> <input ng-model="newAnimal.carimbo" type="number"> </md-input-container> <md-input-container class="md-block"> <label>Raza</label> <md-select ng-model="newAnimal.raza"> <md-option ng-repeat="raza in razas" value="{{raza.id}}"> {{raza.nombre}} </md-option> </md-select></md-input-container> <md-input-container class="md-block"> <label>Estado Sanitario</label> <md-select ng-model="newAnimal.estado_sanitario"> <md-option value="E"> En fecha </md-option> <md-option value="N"> No esta en fecha </md-option> <md-option value="D"> Desconocido </md-option> </md-select> </md-input-container> <md-input-container class="md-block"> <label>Lote</label> <md-select ng-model="newAnimal.lote"> <md-option value=""> No asignar </md-option> <md-option ng-repeat="lote in lotes" value="{{lote.id}}"> {{lote.nombre}} </md-option> </md-select></md-input-container> <md-input-container class="md-block"> <label>Peso</label> <input ng-model="newAnimal.peso_especifico" type="number"> </md-input-container> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="razas.length >= 1 && categorias.length >= 1" layout-align="space-around"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-content> </md-dialog>'),
a.put("views/dialogs/dialogo_crear_compra.html",'<md-dialog layout="column" aria-label="Compra" style="min-width: 100%; min-height: 100%"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Compra Animal</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"> <md-icon class="md-icon-button white-text"><i class="material-icons">close</i></md-icon> </md-button> </div> </md-toolbar> <!-- Card Encabezado --> <md-card> <md-content layout-padding> <h6 class="green-text">Encabezado</h6> <div layout="row"> <md-input-container class="md-accent-1 md-block" flex> <label>Codigo de establecimiento del vendedor</label> <input ng-model="newCompra.cod_establecimiento_vendedor"> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Nombre del vendedor</label> <input ng-model="newCompra.nombre_vendedor"> </md-input-container> <md-datepicker ng-model="newCompra.fecha" style="margin:13px 0" md-placeholder="Fecha de compra"></md-datepicker> </div> </md-content> </md-card> <md-card> <md-content layout-padding> <h6 class="green-text">Detalles</h6> <div layout="row"> <md-input-container class="md-accent-1 md-block" flex> <label>Categoria</label> <md-select ng-model="newDetalle.categoria"> <md-option ng-repeat="categoria in categorias" value="{{categoria.id}}"> {{categoria.nombre}} </md-option> </md-select> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Carimbo</label> <md-select ng-model="newDetalle.carimbo"> <md-option value="0">0</md-option> <md-option value="1">1</md-option> <md-option value="2">2</md-option> <md-option value="3">3</md-option> <md-option value="4">4</md-option> <md-option value="5">5</md-option> <md-option value="6">6</md-option> <md-option value="7">7</md-option> <md-option value="8">8</md-option> <md-option value="9">9</md-option> </md-select> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Raza</label> <md-select ng-model="newDetalle.raza"> <md-option ng-repeat="raza in razas" value="{{raza.id}}"> {{raza.nombre}} </md-option> </md-select> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Cantidad</label> <input type="number" ng-model="newDetalle.cantidad"> </md-input-container> <md-input-container class="md-accent-1 md-block" flex> <label>Nro de caravana inicial</label> <input type="number" ng-model="newDetalle.nro_caravana_inicial"> </md-input-container> <md-button class="md-icon-button" ng-click="cargarDetalleCompra(newDetalle)"> <md-icon><i class="material-icons">add</i></md-icon> </md-button> </div> </md-content> </md-card> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="guardarCompra(newCompra)" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> <md-card> <md-content layout-padding> <p>{{newCompra}}</p> </md-content> </md-card> </md-dialog>'),a.put("views/dialogs/dialogo_evento.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Sanitación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Descripción</label> <input type="text" ng-model="newEvento.nombre" required> </md-input-container> <md-input-container> <label>Veterinario</label> <input type="text" ng-model="newEvento.veterinario" required> </md-input-container> <md-input-container ng-hide="newEvento.start && !newEvento.id"> <label>Fecha de Inicio</label> <input type="date" ng-model="newEvento.start" required> </md-input-container> <md-input-container ng-hide="newEvento.end && !newEvento.id"> <label>Fecha de Fin</label> <input type="date" ng-model="newEvento.end" required> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button ng-show="newEvento.id" ng-click="deleteEvento(newEvento)" class="red-text">Eliminar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> <md-button ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_inseminacion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Inseminación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form ng-show="pajuelas.length >= 1"> <md-dialog-content> <div> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha" required> </md-input-container> <md-input-container> <label>Pajuela</label> <md-select ng-model="form.pajuela"> <md-option ng-repeat="pajuela in pajuelas" value="{{pajuela.id}}"> {{pajuela.nombre}} </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </div> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="pajuelas.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_lote.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Lote</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form layout="column" layout-padding ng-show="potreros.length >= 1"> <md-input-container> <label>Nombre</label> <input ng-model="newLote.nombre"> </md-input-container> <md-input-container> <label>Potrero</label> <md-select ng-model="newLote.potrero"> <md-option ng-repeat="potrero in potreros" value="{{potrero.id}}"> {{potrero.nombre}} </md-option> </md-select> </md-input-container> <md-input-container> <label>Peso Promedio</label> <input ng-model="newLote.peso_promedio"> </md-input-container> <md-input-container> <label>Cantidad</label> <input ng-model="newLote.animales.length" disabled> </md-input-container> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="potreros.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_mortandad.html",'<md-dialog layout="column" aria-label="Mortandad" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Mortandad/Abigeo</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha"> </md-input-container> <md-input-container> <label>Tipo</label> <md-select ng-model="form.tipo"> <md-option value="M"> Mortandad </md-option> <md-option value="A"> Abigeo </md-option> </md-select> </md-input-container> <md-input-container> <label>Descripción</label> <input ng-model="form.razon"> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_mudar.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Mudar a Lote existente</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <md-dialog-content> <div layout-padding> <form layout="column" ng-show="lotes.length >= 1"> <md-input-container class="block"> <label>Lote</label> <md-select ng-model="form.lote"> <md-option ng-repeat="lote in lotes" value="{{lote.id}}"> {{lote.nombre}} </md-option> </md-select> </md-input-container> </form> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="lotes.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_nutricion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Nutrición</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Tipo</label> <md-select ng-model="newNutricion.tipo_nutricion"> <md-option value="Cría"> Cría </md-option> <md-option value="Engorde"> Engorde </md-option> </md-select> </md-input-container> <md-input-container> <label>Tipo de Alimento</label> <md-select ng-model="newNutricion.tipo_comida"> <md-option ng-repeat="alimento in alimentos" value="{{alimento}}"> {{alimento}} </md-option> </md-select> </md-input-container> <md-input-container ng-show="newNutricion.tipo_comida == \'Otros\'"> <label>Tipo de Alimento (Otro)</label> <input ng-model="form.tipo_comida" required> </md-input-container> <md-input-container> <label>Descripcion de Alimento</label> <input ng-model="newNutricion.descripcion_comida"> </md-input-container> <md-input-container> <label>Fecha de Inicio</label> <input type="date" ng-model="newNutricion.fecha_inicio" required> </md-input-container> <md-input-container> <label>Fecha de Fin</label> <input type="date" ng-model="newNutricion.fecha_fin" required> </md-input-container> <div layout="row" ng-show="newNutricion.fecha_inicio && newNutricion.fecha_fin"> <md-input-container flex> <label>Gramos por Día (p/cabeza)</label> <input ng-model="form.gramos" required ng-change="calculo_kilos(form.gramos)"> </md-input-container> <md-input-container flex> <label>Total kilos (p/cabeza)</label> <input ng-model="form.kilos" required ng-change="calculo_kilos(form.kilos)"> </md-input-container> </div> <md-input-container> <label>Lotes</label> <md-select multiple ng-model="newNutricion.lotes"> <md-option ng-repeat="lote in lotes" value="{{lote.id}}"> {{lote.nombre}} </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions>> </form> </md-dialog>'),a.put("views/dialogs/dialogo_potrero.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Detalle Potrero</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Nombre</label> <input ng-model="newPotrero.nombre" required> </md-input-container> <md-input-container> <label>Superficie (Ha.)</label> <input ng-model="newPotrero.superficie"> </md-input-container> <md-input-container> <label>Uso</label> <input ng-model="newPotrero.uso"> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> </md-dialog>'),a.put("views/dialogs/dialogo_recategorizar.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Recategorizar</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form ng-show="categorias.length >= 1"> <md-dialog-content layout-padding> <div layout="column"> <md-input-container> <label>Categoria</label> <md-select ng-model="form.categoria"> <md-option ng-repeat="categoria in categorias" value="{{categoria.id}}"> {{categoria.nombre}} </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <md-dialog-actions layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </md-dialog-actions> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="categorias.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/dialogs/dialogo_vacunacion.html",'<md-dialog layout="column" aria-label="Lote" style="min-width: 800px"> <md-toolbar> <div class="md-toolbar-tools"> <h2 class="white-text">Inseminación</h2> <span flex></span> <md-button class="md-icon-button" aria-label="cancel" ng-click="cancel()"></md-button> </div> </md-toolbar> <form> <md-dialog-content> <div> <md-input-container> <label>Fecha</label> <input type="date" ng-model="form.fecha" required> </md-input-container> <md-input-container> <label>Sanitacion</label> <md-select ng-model="form.sanitacion"> <md-option ng-repeat="sanitacion in sanitaciones" value="{{sanitacion.id}}"> {{sanitacion.title}} </md-option> </md-select> </md-input-container> <md-input-container> <label>Vacuna</label> <md-select ng-model="form.vacuna"> <md-option ng-repeat="vacuna in vacunas" value="{{vacuna.id}}"> {{vacuna.nombre}} - {{vacuna.nombre_cientifico}} </md-option> </md-select> </md-input-container> </div> </md-dialog-content> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" ng-click="answer(\'guardar\')" class="md-primary">Guardar</md-button> <md-button ng-click="cancel()">Cancelar</md-button> </div> </form> <div layout="row" layout-sm="column" layout-align="center center" ng-hide="sanitaciones.length >= 1"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> </md-dialog>'),a.put("views/establecimiento.html",'<div layout-padding> <h1 class="md-display-1 green-text">Establecimiento</h1> </div> <div layout="row"> <md-card flex layout="column" class="center action" ng-click="go(\'/potrero\')"> <div flex class="md-toolbar-tools green darken-1"> <span flex></span> <p class="white-text md-title">Potreros</p> <span flex></span> </div> </md-card> <md-card flex layout="column" class="center action"> <div flex class="md-toolbar-tools green darken-1"> <span flex></span> <p class="white-text md-title">Compra de animales</p> <span flex></span> </div> </md-card> <md-card flex layout="column" class="center action"> <div flex class="md-toolbar-tools green darken-1"> <span flex></span> <p class="white-text md-title">Venta de animales</p> <span flex></span> </div> </md-card> </div>'),a.put("views/inventario.html",'<div layout="row" layout-sm="column" ng-hide="cargandoAnimal && cargandoLote" layout-align="space-around"> <md-progress-circular class="md-accent" md-mode="indeterminate"></md-progress-circular> </div> <div layout="column" ng-show="cargandoAnimal && cargandoLote"> <div class="md-padding green-text" layout="row"> <md-button href="#/inventario">Inventario</md-button> <md-button href="#/servicios">Servicios</md-button> <md-button href="#/compra">Compra</md-button> </div> <!--Section Lotes --> <section> <md-card> <md-toolbar class="green"> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Lotes</h2> <span flex></span> <md-button class="md-icon-button" ng-show="selectionLote.length == 1" ng-click="cargarDetalleLote(selectionLote[0])" aria-label="edit-lote"> <md-icon><i class="material-icons white-text">edit</i></md-icon> </md-button> <md-button class="md-icon-button" ng-show="selectionLote.length == 1" ng-click="deleteLote(selectionLote[0])" aria-label="delete"> <md-icon><i style="color:white" class="material-icons">delete</i></md-icon> </md-button> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons white-text">more_vert</i></md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-hide="true"> <md-button> <p>Nada</p> </md-button> </md-menu-item> <md-menu-item> <md-button ng-click="cargarLote()"> <p>Agregar</p> </md-button> </md-menu-item> <md-divider ng-show="selectionLote.length == 1"></md-divider> <md-menu-item ng-show="selectionLote.length == 1"> <md-button ng-click="cargarDetalleLote(selectionLote[0])"> <p>Modificar</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </div> </md-toolbar> <div layout-wrap layout-padding layout="row"> <div class="hoverCard" flex="25" flex-sm="50" flex-md="50" ng-repeat="lote in lotes"> <md-card ng-click="changeLote(lote);" class="grey lighten-3"> <md-card-title> <md-card-title-text> <span class="md-headline">{{lote.nombre}}</span> <span class="md-subhead">Potrero: {{lote.potrero_nombre}}<br> Peso promedio: {{lote.peso_promedio}} Kg.<br> Cantidad: {{lote.animales.length}} </span> </md-card-title-text> </md-card-title> <md-card-actions layout="row" layout-align="end center"> <md-checkbox aria-label="lote" disabled ng-model="lote.selected"></md-checkbox> </md-card-actions> </md-card> </div> <p ng-if="lotes.length <= 0" class="danger">No tiene ningún lote guardado.</p> </div> </md-card> </section> <!--Section Animales --> <section> <md-card layout="column"> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Animales</h2> </div> </md-toolbar> <div layout="row" layout-padding> <md-input-container flex="50"> <label>Búsqueda</label> <input ng-model="searchAnimal"> </md-input-container> </div> <md-toolbar class="white md-subheader-wrapper" ng-class="{\'lime lighten-3\': selection.length}"> <div class="md-toolbar-tools"> <md-button ng-hide="selection.length" ng-click="cargar()" class="lime-text">Agregar</md-button> <h2 class="lime-text text-darken-4"> <span ng-show="selection.length >= 1">{{selectionCant}} {{mensaje}} </span> </h2> <span flex></span> <md-button class="md-icon-button" ng-show="selection.length == 1" ng-click="cargarDetalle(selection[0])" aria-label="edit"> <md-icon><i class="material-icons">edit</i></md-icon> <md-button class="md-icon-button" ng-show="selection.length == 1" ng-click="cargarDetalle(selection[0])" aria-label="Editar Animal"> <md-icon><i class="material-icons">edit</i> </md-icon> </md-button> <md-button class="md-icon-button" ng-show="selection.length == 1" ng-click="deleteAnimal(selection[0])" aria-label="delete"> <md-icon><i class="material-icons">delete</i></md-icon> <md-button class="md-icon-button" ng-show="selection.length == 1" ng-click="deleteAnimal(selection[0])" aria-label="Delete Animal"> <md-icon><i class="material-icons">delete</i> </md-icon> </md-button> <md-menu md-position-mode="target-right target"> <md-button class="md-icon-button" aria-label="More" ng-click="$mdOpenMenu($event)"> <md-icon><i class="material-icons">more_vert</i></md-icon> </md-button> <md-menu-content width="4"> <md-menu-item ng-hide="true"> <md-button> <p>Nada</p> </md-button> </md-menu-item> <md-menu-item ng-hide="selection.length"> <md-button ng-click="cargar()"> <p>Agregar</p> </md-button> </md-menu-item> <md-menu-item ng-show="selection.length"> <md-button ng-click="agruparEnLote(selection)"> <p>Agrupar en Lote nuevo</p> </md-button> </md-menu-item> <md-menu-item ng-show="selection.length"> <md-button ng-click="cargarDetalleMudar()"> <p>Mudar a Lote existente</p> </md-button> </md-menu-item> <md-divider ng-show="selection.length"></md-divider> <md-menu-item ng-show="selection.length"> <md-button ng-click="cargarDetalleRecategorizar()"> <p>Recategorizar</p> </md-button> </md-menu-item> <md-divider ng-show="selection.length"></md-divider> <md-menu-item ng-show="selection.length"> <md-button ng-click="cargarDetalleMortandad()"> <p>Declarar Mortandad/Abigeo</p> </md-button> </md-menu-item> </md-menu-content> </md-menu> </md-button></md-button></div> </md-toolbar> <md-content> <table class="table table-responsive centered hoverable" right-click="selectAll()"> <thead> <tr> <th> <md-checkbox aria-label="selectAll" ng-model="selectedAll" ng-change="selectAll()"></md-checkbox> </th> <th> <a ng-click="sortType = \'caravana\'; sortReverse = !sortReverse" class="grey-text"> Caravana <span ng-show="sortType == \'caravana\' && !sortReverse"></span> <span ng-show="sortType == \'caravana\' && sortReverse"></span> </a> </th> <th> <a ng-click="sortType = \'categoria_nombre\'; sortReverse = !sortReverse" class="grey-text"> Categoria <span ng-show="sortType == \'categoria_nombre\' && !sortReverse"></span> <span ng-show="sortType == \'categoria_nombre\' && sortReverse"></span> </a> </th> <th> <a ng-click="sortType = \'carimbo\'; sortReverse = !sortReverse" class="grey-text"> Carimbo <span ng-show="sortType == \'carimbo\' && !sortReverse"></span> <span ng-show="sortType == \'carimbo\' && sortReverse"></span> </a> </th> <th><a ng-click="sortType = \'raza_nombre\'; sortReverse = !sortReverse" class="grey-text"> Raza <span ng-show="sortType == \'raza_nombre\' && !sortReverse"></span> <span ng-show="sortType == \'raza_nombre\' && sortReverse"></span> </a></th> <th><a ng-click="sortType = \'estado_sanitario\'; sortReverse = !sortReverse" class="grey-text"> Estado Sanitario <span ng-show="sortType == \'estado_sanitario\' && !sortReverse"></span> <span ng-show="sortType == \'estado_sanitario\' && sortReverse"></span> </a></th> <th><a ng-click="sortType = \'lote_nombre\'; sortReverse = !sortReverse" class="grey-text"> Lote <span ng-show="sortType == \'lote_nombre\' && !sortReverse"></span> <span ng-show="sortType == \'lote_nombre\' && sortReverse"></span> </a></th> </tr> </thead> <tbody> <tr ng-repeat="animal in animales | orderBy:sortType:sortReverse | filter:searchAnimal | filter:filterPorLote | filter:filterPorSearch" ng-click="change(animal);$event.stopPropagation();" ng-class="{\'cb-active\': animal.selected}" ng-class="{\'selected\':selection.indexOf($index)!=-1}" class="action"> <td> <md-checkbox aria-label="select" ng-model="animal.selected" ng-click="toggle(animal.id);$event.stopPropagation();"></md-checkbox> </td> <td>{{animal.caravana}}</td> <td>{{animal.categoria_nombre}}</td> <td>{{animal.carimbo}}</td> <td>{{animal.raza_nombre}}</td> <td>{{animal.estado_sanitario_display}}</td> <td>{{animal.lote_nombre || \'No asignado\'}} <span style="color: deeppink" ng-show="animal.servicio">(*)</span></td> </tr> </tbody> </table> </md-content> </md-card> </section> </div>'),a.put("views/login.html",'<div layout="row" layout-sm="row" layout-xs="column"> <div flex></div> <div flex id="login_view" layout-padding ng-controller="LoginCtrl"> <md-card> <img src="images/logo.1dab0356.jpg" class="md-card-image" alt="Washed Out"> <md-card-title> <md-card-title-text> <span class="md-headline">Login</span> </md-card-title-text> </md-card-title> <md-card-content> <form role="form" layout="column" ng-submit="login(loginForm)" name="loginForm"> <md-input-container> <label>Nombre de usuario</label> <input ng-model="model.username" type="text"> </md-input-container> <md-input-container> <label>Contraseña</label> <input ng-model="model.password" type="password"> </md-input-container> <div class="md-actions" layout="row"> <!--<div class="md-actions"><a href="#" flex>Informe</a></div>--> <span flex></span> <md-button flex-order="1" type="submit" class="md-primary">Ingresar</md-button> </div> <div class="red-text" ng-repeat="error in errors.password">{{error}}</div> <div class="red-text" ng-repeat="error in errors.non_field_errors">{{error}}</div> <div class="red-text" ng-if="error">{{error}}</div> </form> </md-card-content> </md-card> </div> <div flex></div> </div>'),a.put("views/logout.html","<p>This is the logout view.</p>"),a.put("views/main.html",'<div layout="row"> <md-card flex="20" ng-repeat="e in establecimientos" class="green"> <md-card-title> <md-card-title-text> <span class="md-headline white-text">{{e.nombre}}</span> </md-card-title-text> <md-card-title-media> <div class="md-media-lg card-media"></div> </md-card-title-media> </md-card-title> <md-card-actions layout="row" layout-align="end center"> <md-button ng-click="seleccionar(e)" class="white-text">Continuar</md-button> </md-card-actions> </md-card> </div>'),a.put("views/nutricion.html",'<div layout-padding> <h1 class="md-display-1 green-text">Nutrición</h1> </div> <section> <md-card layout="column"> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Dietas Activas</h2> </div> </md-toolbar> <md-content> <br> <md-button ng-hide="selection.length" ng-click="cargarNutricion()" class="lime-text">Agregar</md-button> <br><br> <center> <p ng-hide="dietas.length">No tienes dietas activas. </p> </center> <table class="table table-responsive centered" ng-show="dietas.length > 0" right-click="selectAll()"> <thead> <tr> <th>Periodo</th> <th>Tipo de Nutrición</th> <th>Tipo de Alimento</th> <th>Descrip. de Alimento</th> <th>Total kg.(p/cabeza)</th> <th>Lotes</th> </tr> </thead> <tbody> <tr ng-repeat="dieta in dietas"> <td style="padding: 10px !important">{{dieta.fecha_inicio | date:\'dd/MM/yyyy\'}} - {{dieta.fecha_fin | date:\'dd/MM/yyyy\'}}</td> <td>{{dieta.tipo_nutricion}}</td> <td>{{dieta.tipo_comida}}</td> <td>{{dieta.descripcion_comida}}</td> <td>{{dieta.kilos}}</td> <td><div ng-repeat="lote in dieta.lotes_completo">{{lote.nombre}}</div></td> <td><i class="material-icons action" ng-click="cargarNutricion(dieta)">mode_edit</i> <i class="material-icons action" ng-click="deleteNutricion(dieta)">delete</i></td> </tr> </tbody> </table> </md-content> </md-card> </section>'),a.put("views/potrero.html",'<section> <md-button href="#/establecimiento" class="green-text">Establecimiento</md-button> <md-card layout="column"> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Potreros</h2> </div> </md-toolbar> <md-content> <br> <md-button ng-hide="selection.length" ng-click="cargarPotrero()" class="lime-text">Agregar</md-button> <br><br> <table class="table table-responsive centered" right-click="selectAll()"> <thead> <tr> <th>Nombre</th> <th>Superficie (Ha.)</th> <th>Uso</th> <th>Acciones</th> </tr> </thead> <tbody> <tr ng-repeat="potrero in potreros"> <td style="padding: 10px !important">{{potrero.nombre}}</td> <td>{{potrero.superficie}}</td> <td>{{potrero.uso}}</td> <td><i class="material-icons action" ng-click="cargarPotrero(potrero)">mode_edit</i> <i class="material-icons action" ng-click="deletePotrero(potrero)">delete</i></td> </tr> </tbody> </table> </md-content> </md-card> </section>'),a.put("views/sanitacion.html",'<h1 class="md-display-1 green-text">Sanitación</h1> <section> <md-card> <md-toolbar class=""> <div class="md-toolbar-tools white-text"> <h2 class="md-title">Calendario de Sanitación</h2> </div> </md-toolbar> <md-content> <br> <md-button ng-hide="selection.length" ng-click="agregarEvento()" class="lime-text">Agendar vacunación</md-button> <br> <div id="calendar" style="cursor:pointer"></div> </md-content> </md-card> </section>')}]);